-- MySQL dump 10.13  Distrib 5.5.27, for Win32 (x86)
--
-- Host: localhost    Database: myblog
-- ------------------------------------------------------
-- Server version	5.5.27

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Current Database: `myblog`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `myblog` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `myblog`;

--
-- Table structure for table `blog_accountactive`
--

DROP TABLE IF EXISTS `blog_accountactive`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_accountactive` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `active_code` varchar(255) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `created_at` int(255) DEFAULT NULL,
  `is_active` tinyint(4) DEFAULT NULL,
  `active_time` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_accountactive`
--

LOCK TABLES `blog_accountactive` WRITE;
/*!40000 ALTER TABLE `blog_accountactive` DISABLE KEYS */;
INSERT INTO `blog_accountactive` VALUES (3,'6e59eabea55a12715f2ec62acf83f7808b313b499bf30fe31de272dc4dce1220',6,1505715116,1,1505715243),(4,'71a14fb948192160d5566af175b651bcadfb72df33f26322249584fbc382bff2',11,1506303014,1,NULL),(5,'66a99295022468e2dc7403ae78391bd428d97b8908df53d3721a2b3f97d9b2eb',12,1506584343,1,NULL);
/*!40000 ALTER TABLE `blog_accountactive` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_article`
--

DROP TABLE IF EXISTS `blog_article`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_article` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `typeid` int(255) NOT NULL COMMENT '类别id',
  `author` varchar(20) NOT NULL DEFAULT '' COMMENT '文章作者',
  `title` varchar(255) NOT NULL COMMENT '帖子标题',
  `content` longtext NOT NULL COMMENT '文章内容',
  `desc` text COMMENT '文章描述',
  `cover` varchar(255) DEFAULT NULL COMMENT '封面图保存地址',
  `hits` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '文章浏览次数',
  `created_at` int(10) unsigned NOT NULL COMMENT '发文章的时间戳',
  `updated_at` int(11) DEFAULT '0',
  `is_recommend` tinyint(4) DEFAULT '0' COMMENT '是否推荐 0 表示不推荐',
  `deleted_at` int(4) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_article`
--

LOCK TABLES `blog_article` WRITE;
/*!40000 ALTER TABLE `blog_article` DISABLE KEYS */;
INSERT INTO `blog_article` VALUES (3,3,'ruanyifeng','asm.js 和 Emscripten 入门教程','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Web 技术突飞猛进，但是有一个领域一直无法突破 ---- 游戏。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	游戏的性能要求非常高，一些大型游戏连 PC 跑起来都很吃力，更不要提在浏览器的沙盒模型里跑了！但是，尽管很困难，许多开发者始终没放弃，希望让浏览器运行 3D 游戏。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090305.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2012年，Mozilla 的工程师&amp;nbsp;&lt;a href=&quot;https://github.com/kripken&quot; target=&quot;_blank&quot;&gt;Alon Zakai&lt;/a&gt;&amp;nbsp;在研究 LLVM 编译器时突发奇想：许多 3D 游戏都是用 C / C++ 语言写的，如果能将 C / C++ 语言编译成 JavaScript 代码，它们不就能在浏览器里运行了吗？众所周知，JavaScript 的基本语法与 C 语言高度相似。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	于是，他开始研究怎么才能实现这个目标，为此专门做了一个编译器项目&amp;nbsp;&lt;a href=&quot;https://github.com/kripken/emscripten&quot; target=&quot;_blank&quot;&gt;Emscripten&lt;/a&gt;。这个编译器可以将 C / C++ 代码编译成 JS 代码，但不是普通的 JS，而是一种叫做&amp;nbsp;&lt;a href=&quot;http://asmjs.org/&quot; target=&quot;_blank&quot;&gt;asm.js&lt;/a&gt;&amp;nbsp;的 JavaScript 变体。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	本文就将介绍 asm.js 和 Emscripten 的基本用法，介绍如何将 C / C++ 转成 JS。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090301.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一、asm.js 的简介\r\n&lt;/h2&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1.1 原理\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	C / C++ 编译成 JS 有两个最大的困难。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			C / C++ 是静态类型语言，而 JS 是动态类型语言。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			C / C++ 是手动内存管理，而 JS 依靠垃圾回收机制。\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span style=&quot;font-weight:800;&quot;&gt;asm.js 就是为了解决这两个问题而设计的：它的变量一律都是静态类型，并且取消垃圾回收机制。&lt;/span&gt;除了这两点，它与 JavaScript 并无差异，也就是说，asm.js 是 JavaScript 的一个严格的子集，只能使用后者的一部分语法。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090304.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一旦 JavaScript 引擎发现运行的是 asm.js，就知道这是经过优化的代码，可以跳过语法分析这一步，直接转成汇编语言。另外，浏览器还会调用 WebGL 通过 GPU 执行 asm.js，即 asm.js 的执行引擎与普通的 JavaScript 脚本不同。这些都是 asm.js 运行较快的原因。据称，asm.js 在浏览器里的运行速度，大约是原生代码的50%左右。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下面就依次介绍 asm.js 的两大语法特点。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1.2 静态类型的变量\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	asm.js 只提供两种&lt;a href=&quot;http://asmjs.org/spec/latest/#value-types&quot; target=&quot;_blank&quot;&gt;数据类型&lt;/a&gt;。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			32位带符号整数\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			64位带符号浮点数\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090303.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	其他数据类型，比如字符串、布尔值或者对象，asm.js 一概不提供。它们都是以数值的形式存在，保存在内存中，通过&amp;nbsp;&lt;a href=&quot;http://es6.ruanyifeng.com/#docs/arraybuffer&quot;&gt;TypedArray&lt;/a&gt;调用。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果变量的类型要在运行时确定，asm.js 就要求事先声明类型，并且不得改变，这样就节省了类型判断的时间。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	asm.js 的类型声明有固定写法，变量 | 0表示整数，+变量表示浮点数。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; a &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; a &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // x 是32位整数 &lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; y &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // y 是64位浮点数 &lt;/span&gt;&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，变量x声明为整数，y声明为浮点数。支持 asm.js 的引擎一看到x = a | 0，就知道x是整数，然后采用 asm.js 的机制处理。如果引擎不支持 asm.js 也没关系，这段代码照样可以运行，最后得到的还是同样的结果。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	再看下面的例子。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // 写法一 &lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; first &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; second &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; first&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // 写法二 &lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; first &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; second &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; first &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，写法一是普通的 JavaScript，变量second只有在运行时才能知道类型，这样就很慢了，写法二是 asm.js，second在声明时就知道是整数，速度就提高了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	函数的参数和返回值，都要用这种方式指定类型。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;add&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; y &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; y &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，除了参数x和y需要声明类型，函数的返回值也需要声明类型。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1.3 垃圾回收机制\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	asm.js 没有垃圾回收机制，所有内存操作都由程序员自己控制。asm.js 通过 TypedArray 直接读写内存。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下面就是直接读写内存的例子。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; buffer &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot; style=&quot;color:#111111;&quot;&gt;ArrayBuffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;32768&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; HEAP8 &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot; style=&quot;color:#111111;&quot;&gt;Int8Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;compiledCode&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; HEAP&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; HEAP&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;ptr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果涉及到指针，也是一样处理。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;size_t &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;strlen&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;char &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; char &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt;curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt;curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; curr&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面的代码编译成 asm.js，就是下面这样。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;strlen&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; ptr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; ptr&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;MEM8&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;curr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;curr &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; ptr&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1.4 asm.js 与 WebAssembly 的异同\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果你对 JS 比较了解，可能知道还有一种叫做 WebAssembly 的技术，也能将 C / C++ 转成 JS 引擎可以运行的代码。那么它与 asm.js 有何区别呢？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	回答是，两者的功能基本一致，就是转出来的代码不一样：asm.js 是文本，WebAssembly 是二进制字节码，因此运行速度更快、体积更小。从长远来看，WebAssembly 的前景更光明。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	但是，这并不意味着 asm.js 肯定会被淘汰，因为它有两个优点：首先，它是文本，人类可读，比较直观；其次，所有浏览器都支持 asm.js，不会有兼容性问题。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	二、 Emscripten 编译器\r\n&lt;/h2&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.1 Emscripten 简介\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	虽然 asm.js 可以手写，但是它从来就是编译器的目标语言，要通过编译产生。目前，生成 asm.js 的主要工具是&amp;nbsp;&lt;a href=&quot;http://emscripten.org/&quot; target=&quot;_blank&quot;&gt;Emscripten&lt;/a&gt;。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090306.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Emscripten 的底层是 LLVM 编译器，理论上任何可以生成 LLVM IR（Intermediate Representation）的语言，都可以编译生成 asm.js。 但是实际上，Emscripten 几乎只用于将 C / C++ 代码编译生成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;C&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;C&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;++&lt;/span&gt; ⇒ LLVM &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; LLVM IR ⇒ Emscripten ⇒ asm&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;js&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090302.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.2 Emscripten 的安装\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Emscripten 的安装可以根据&lt;a href=&quot;http://kripken.github.io/emscripten-site/docs/getting_started/downloads.html&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;。由于依赖较多，安装起来比较麻烦，我发现更方便的方法是&lt;a href=&quot;http://kripken.github.io/emscripten-site/docs/getting_started/downloads.html#updating-the-emscripten-sdk&quot; target=&quot;_blank&quot;&gt;安装 SDK&lt;/a&gt;。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	你可以按照下面的&lt;a href=&quot;https://github.com/kripken/emscripten/issues/5443#issuecomment-320981440&quot; target=&quot;_blank&quot;&gt;步骤&lt;/a&gt;操作。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ git clone https&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;github&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;juj&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;emsdk&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;git\r\n$ cd emsdk\r\n$ &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;emsdk install &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;--&lt;/span&gt;build&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;Release sdk&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;incoming&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;64bit binaryen&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;master&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;64bit\r\n$ &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;emsdk activate &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;--&lt;/span&gt;build&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;Release sdk&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;incoming&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;64bit binaryen&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;master&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;64bit\r\n$ source &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;emsdk_env&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;sh&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	注意，最后一行非常重要。每次重新登陆或者新建 Shell 窗口，都要执行一次这行命令source ./emsdk_env.sh。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.3 Hello World\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	首先，新建一个最简单的 C++ 程序hello.cc。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;#include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;iostream&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; int &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;main&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;cout &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;Hello World!&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，将这个程序转成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ emcc hello&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;cc\r\n$ node a&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;js\r\nHello World&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;!&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，emcc命令用于编译源码，默认生成a.out.js。使用 Node 执行a.out.js，就会在命令行输出 Hello World。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	注意，asm.js 默认自动执行main函数。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	emcc是 Emscripten 的编译命令。它的用法非常简单。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt;# 生成 a.out.js &lt;/span&gt;$ emcc hello&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;c &lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt;# 生成 hello.js &lt;/span&gt;$ emcc hello&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;c &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o hello&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;js &lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt;# 生成 hello.html 和 hello.js &lt;/span&gt;$ emcc hello&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;c &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o hello&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;html&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	三、Emscripten 语法\r\n&lt;/h2&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3.1 C/C++ 调用 JavaScript\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Emscripten 允许 C / C++ 代码直接调用 JavaScript。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	新建一个文件example1.cc，写入下面的代码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;#include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;emscripten&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;h&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; int &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;main&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;EM_ASM&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;alert&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'Hello World!\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	EM_ASM是一个宏，会调用嵌入的 JavaScript 代码。注意，JavaScript 代码要写在大括号里面。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，将这个程序编译成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ emcc example1&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;cc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o example1&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;html&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	浏览器打开example1.html，就会跳出对话框Hello World!。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3.2 C/C++ 与 JavaScript 的通信\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Emscripten 允许 C / C++ 代码与 JavaScript 通信。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	新建一个文件example2.cc，写入下面的代码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;#include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;emscripten&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;h&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; #include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;iostream&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; int &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;main&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; int val1 &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; int val2 &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;EM_ASM_INT&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; $&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; val1&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;cout &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;val2 == &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt; val2 &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，EM_ASM_INT表示 JavaScript 代码返回的是一个整数，它的参数里面的$0表示第一个参数，$1表示第二个参数，以此类推。EM_ASM_INT的其他参数会按照顺序，传入 JavaScript 表达式。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，将这个程序编译成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ emcc example2&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;cc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o example2&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;html&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	浏览器打开网页example2.html，会显示val2 == 42。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3.3 EM_ASM 宏系列\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Emscripten 提供以下宏。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			EM_ASM：调用 JS 代码，没有参数，也没有返回值。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			EM&lt;span&gt;ASM&lt;/span&gt;ARGS：调用 JS 代码，可以有任意个参数，但是没有返回值。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			EM&lt;span&gt;ASM&lt;/span&gt;INT：调用 JS 代码，可以有任意个参数，返回一个整数。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			EM&lt;span&gt;ASM&lt;/span&gt;DOUBLE：调用 JS 代码，可以有任意个参数，返回一个双精度浮点数。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			EM&lt;span&gt;ASM&lt;/span&gt;INT_V：调用 JS 代码，没有参数，返回一个整数。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			EM&lt;span&gt;ASM&lt;/span&gt;DOUBLE_V：调用 JS 代码，没有参数，返回一个双精度浮点数。\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下面是一个EM_ASM_ARGS的例子。新建文件example3.cc，写入下面的代码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;#include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;emscripten&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;h&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; #include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;string&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; void &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;Alert&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;const std&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;string &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;amp;&lt;/span&gt; msg&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;EM_ASM_ARGS&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; var msg &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;Pointer_stringify&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;$&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;alert&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; msg&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;c_str&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; int &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;main&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;Alert&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;Hello from C++!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，我们将一个字符串传入 JS 代码。由于没有返回值，所以使用EM_ASM_ARGS。另外，我们都知道，在 C / C++ 里面，字符串是一个字符数组，所以要调用Pointer_stringify()方法将字符数组转成 JS 的字符串。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	接着，将这个程序转成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ emcc example3&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;cc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o example3&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;html&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	浏览器打开example3.html，会跳出对话框&quot;Hello from C++!&quot;。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3.4 JavaScript 调用 C / C++ 代码\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	JS 代码也可以调用 C / C++ 代码。新建一个文件example4.cc，写入下面的代码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;#include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;emscripten&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;h&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; extern &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; double &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;SquareVal&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;double val&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; val &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; int &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;main&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;EM_ASM&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; SquareVal &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; Module&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;cwrap&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'SquareVal\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'number\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'number\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; var x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;12.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;alert&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'Computing: \'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\' * \'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; x &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\' = \'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;SquareVal&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，EM_ASM执行 JS 代码，里面有一个 C 语言函数SquareVal。这个函数必须放在extern &quot;C&quot;代码块之中定义，而且 JS 代码还要用Module.cwrap()方法引入这个函数。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Module.cwrap()接受三个参数，含义如下。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			C 函数的名称，放在引号之中。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			C 函数返回值的类型。如果没有返回值，可以把类型写成null。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			函数参数类型的数组。\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	除了Module.cwrap()，还有一个Module.ccall()方法，可以在 JS 代码之中调用 C 函数。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; result &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; Module&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;ccall&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'int_sqrt\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // C 函数的名称 &lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'number\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // 返回值的类型 &lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'number\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // 参数类型的数组 &lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt; // 参数数组 &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	回到前面的示例，现在将example4.cc编译成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$  emcc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;s EXPORTED_FUNCTIONS&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;[\'_SquareVal\', \'_main\']&quot;&lt;/span&gt; example4&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;cc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o example4&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;html&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	注意，编译命令里面要用-s EXPORTED_FUNCTIONS参数给出输出的函数名数组，而且函数名前面加下划线。本例只输出两个 C 函数，所以要写成[\'_SquareVal\', \'_main\']。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	浏览器打开example4.html，就会看到弹出的对话框里面显示下面的内容。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;Computing&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;12.5&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;12.5&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;156.25&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3.5 C 函数输出为 JavaScript 模块\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	另一种情况是输出 C 函数，供网页里面的 JavaScript 脚本调用。 新建一个文件example5.cc，写入下面的代码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;extern &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; double &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;SquareVal&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;double val&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; val &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;*&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，SquareVal是一个 C 函数，放在extern &quot;C&quot;代码块里面，就可以对外输出。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，编译这个函数。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ emcc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;s EXPORTED_FUNCTIONS&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;[\'_SquareVal\']&quot;&lt;/span&gt; example5&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;cc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o example5&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;js&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，-s EXPORTED_FUNCTIONS参数告诉编译器，代码里面需要输出的函数名。函数名前面要加下划线。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	接着，写一个网页，加载刚刚生成的example5.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-markup&quot;&gt;&lt;span class=&quot;token doctype&quot; style=&quot;color:slategray;&quot;&gt;&amp;lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML//EN&quot;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;Test File&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token script&quot; style=&quot;color:#111111;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot; style=&quot;color:#669900;&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot; style=&quot;color:#0077AA;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot; style=&quot;color:#669900;&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot; style=&quot;color:#0077AA;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&quot;&lt;/span&gt;example5.js&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token script&quot; style=&quot;color:#111111;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; SquareVal &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; Module&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cwrap&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'SquareVal\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'number\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'number\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;result == &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SquareVal&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token tag&quot; style=&quot;color:#990055;&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	浏览器打开这个网页，就可以看到result == 100了。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3.6 Node 调用 C 函数\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果执行环境不是浏览器，而是 Node，那么调用 C 函数就更方便了。新建一个文件example6.c，写入下面的代码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-clike&quot;&gt;#include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;stdio&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;h&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; #include &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;emscripten&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;h&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; void &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;sayHi&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;printf&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;Hi!\\n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; int &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;daysInWeek&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，将这个脚本编译成 asm.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ emcc &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;s EXPORTED_FUNCTIONS&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;[\'_sayHi\', \'_daysInWeek\']&quot;&lt;/span&gt; example6&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;c &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;o example6&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;js&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	接着，写一个 Node 脚本test.js。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;var&lt;/span&gt; em_module &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;require&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'./api_example.js\'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; em_module&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;_sayHi&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; em_module&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;ccall&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;sayHi&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;log&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;em_module&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot; style=&quot;color:#111111;&quot;&gt;_daysInWeek&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，Node 脚本调用 C 函数有两种方法，一种是使用下划线函数名调用em_module._sayHi()，另一种使用ccall方法调用em_module.ccall(&quot;sayHi&quot;)。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	运行这个脚本，就可以看到命令行的输出。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ node test&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;js\r\nHi&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;!&lt;/span&gt; Hi&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;7&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	四、用途\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	asm.js 不仅能让浏览器运行&amp;nbsp;&lt;a href=&quot;http://kripken.github.io/boon/boon.html&quot; target=&quot;_blank&quot;&gt;3D 游戏&lt;/a&gt;，还可以运行各种&lt;a href=&quot;https://github.com/dherman/asm.js/wiki/Projects-using-asm.js&quot; target=&quot;_blank&quot;&gt;服务器软件&lt;/a&gt;，比如&amp;nbsp;&lt;a href=&quot;https://github.com/kripken/lua.vm.js&quot; target=&quot;_blank&quot;&gt;Lua&lt;/a&gt;、&lt;a href=&quot;https://github.com/xxuejie/webruby&quot; target=&quot;_blank&quot;&gt;Ruby&lt;/a&gt;&amp;nbsp;和&amp;nbsp;&lt;a href=&quot;https://github.com/kripken/sql.js&quot; target=&quot;_blank&quot;&gt;SQLite&lt;/a&gt;。 这意味着很多工具和算法，都可以使用现成的代码，不用重新写一遍。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	另外，由于 asm.js 的运行速度较快，所以一些计算密集型的操作（比如计算 Hash）可以使用 C / C++ 实现，再在 JS 中调用它们。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	真实的转码实例可以看一下&amp;nbsp;&lt;a href=&quot;https://github.com/kripken/zee.js&quot; target=&quot;_blank&quot;&gt;gzlib&lt;/a&gt;&amp;nbsp;的编译，参考它的&amp;nbsp;&lt;a href=&quot;https://github.com/kripken/zee.js/blob/master/Makefile&quot; target=&quot;_blank&quot;&gt;Makefile&lt;/a&gt;&amp;nbsp;怎么写。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	五、参考链接\r\n&lt;/h2&gt;\r\n&lt;ul style=&quot;color:#111111;font-family:Georgia, serif;font-size:10px;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://en.wikipedia.org/wiki/Asm.js&quot; target=&quot;_blank&quot;&gt;asm.js&lt;/a&gt;, by Wikipedia\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://kripken.github.io/mloc_emscripten_talk/cppcon.html#/&quot; target=&quot;_blank&quot;&gt;Emscripten &amp;amp; asm.js: C++\'s role in the modern web&lt;/a&gt;, by Alon Zakai\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;http://kripken.github.io/emscripten-site/docs/getting_started/Tutorial.html&quot; target=&quot;_blank&quot;&gt;Emscripten Tutorial&lt;/a&gt;, by Emscripten\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://johnresig.com/blog/asmjs-javascript-compile-target/&quot; target=&quot;_blank&quot;&gt;Asm.js: The JavaScript Compile Target&lt;/a&gt;, by John Resig\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;http://devosoft.org/an-introduction-to-web-development-with-emscripten/&quot; target=&quot;_blank&quot;&gt;An Introduction to Web Development with Emscripten&lt;/a&gt;, by Charles Ofria\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;http://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html&quot; target=&quot;_blank&quot;&gt;Interacting with code&lt;/a&gt;, by Emscripten\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://pspdfkit.com/blog/2017/webassembly-a-new-hope/&quot; target=&quot;_blank&quot;&gt;WebAssembly: A New Hope&lt;/a&gt;, by Philipp Spiess and James Swift\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://www.sitepoint.com/understanding-asm-js/&quot; target=&quot;_blank&quot;&gt;Understanding asm.js&lt;/a&gt;, by Afshin Mehrabani\r\n	&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;br /&gt;','许多 3D 游戏都是用 C / C++ 语言写的，如果能将 C / C++ 语言编译成 JavaScript 代码，它们不就能在浏览器里运行了吗？众所周知，JavaScript 的基本语法与 C 语言高度相似。','/Public/uploads/2018-04-10/7acb0a46f21fbe09810db97167600c338744ad00.jpg',4,1505111025,0,0,0),(4,6,'ruanyifeng','使用&quot;泊松分布&quot;（Poisson distribution），判断同一年发生7起枪击案是否巧合。','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	去年12月，美国康涅狄格州发生&lt;a href=&quot;http://news.qq.com/a/20121215/000199.htm&quot; target=&quot;_blank&quot;&gt;校园枪击案&lt;/a&gt;，造成28人死亡。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;a href=&quot;http://www.motherjones.com/politics/2012/07/mass-shootings-map?page=2&quot; target=&quot;_blank&quot;&gt;资料&lt;/a&gt;显示，1982年至2012年，发生62起（大规模）枪击案。其中，2012年发生了7起，是次数最多的一年。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010802.jpg&quot; /&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span style=&quot;font-weight:800;&quot;&gt;去年有这么多枪击案，这是巧合，还是&lt;a href=&quot;http://www.tnr.com/blog/plank/111149/why-are-mass-shootings-the-rise&quot; target=&quot;_blank&quot;&gt;表明&lt;/a&gt;美国治安恶化了？&lt;/span&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	前几天，我看到一篇很有趣的&lt;a href=&quot;http://www.empiricalzeal.com/2012/12/24/are-mass-shootings-really-random-events-a-look-at-the-us-numbers/&quot; target=&quot;_blank&quot;&gt;文章&lt;/a&gt;，使用&lt;a href=&quot;http://zh.wikipedia.org/zh-cn/%E6%B3%8A%E6%9D%BE%E5%88%86%E4%BD%88&quot; target=&quot;_blank&quot;&gt;&quot;泊松分布&quot;&lt;/a&gt;（Poisson distribution），判断同一年发生7起枪击案是否巧合。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	让我们先通过一个例子，了解什么是&quot;泊松分布&quot;。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010803.jpg&quot; /&gt; \r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&lt;span style=&quot;font-weight:800;&quot;&gt;已知某家小杂货店，平均每周售出2个水果罐头。请问该店水果罐头的最佳库存量是多少？&lt;/span&gt; \r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	假定不存在季节因素，可以近似认为，这个问题满足以下三个条件：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（1）顾客购买水果罐头是小概率事件。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（2）购买水果罐头的顾客是独立的，不会互相影响。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（3）顾客购买水果罐头的概率是稳定的。\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	在统计学上，只要某类事件满足上面三个条件，它就服从&quot;泊松分布&quot;。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	泊松分布的公式如下：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&lt;img class=&quot;tex&quot; alt=&quot;P(X=k)=\\frac{e^{-\\lambda}\\lambda^k}{k!}&quot; src=&quot;http://upload.wikimedia.org/math/9/f/a/9fa6dab1d04c709f1502cd54fdd43de7.png&quot; /&gt; \r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	各个参数的含义：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;P：每周销售k个罐头的概率。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;X：水果罐头的销售变量。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;k：X的取值（0，1，2，3...）。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;λ：每周水果罐头的平均销售量，是一个常数，本题为2。\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	根据公式，计算得到每周销量的分布：\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010804.png&quot; /&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	从上表可见，如果存货4个罐头，95%的概率不会缺货（平均每19周发生一次）；如果存货5个罐头，98%的概率不会缺货（平均59周发生一次）。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010805.jpg&quot; /&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	现在，我们再回过头，来看美国枪击案。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	假定它们满足&quot;泊松分布&quot;的三个条件：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;（1）枪击案是小概率事件。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;（2）枪击案是独立的，不会互相影响。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;（3）枪击案的发生概率是稳定的。\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	显然，第三个条件是关键。如果成立，就说明美国的治安没有恶化；如果不成立，就说明枪击案的发生概率不稳定，正在提高，美国治安恶化。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	根据&lt;a href=&quot;http://www.motherjones.com/politics/2012/07/mass-shootings-map?page=2&quot; target=&quot;_blank&quot;&gt;资料&lt;/a&gt;，1982--2012年枪击案的分布情况如下：\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010806.png&quot; /&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	计算得到，平均每年发生2起枪击案，所以 λ = 2 。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010807.png&quot; /&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上图中，蓝色的条形柱是实际的观察值，红色的虚线是理论的预期值。可以看到，观察值与期望值还是相当接近的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://image.beekka.com/blog/201301/bg2013010808.png&quot; /&gt; \r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我们用&lt;a href=&quot;http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test&quot; target=&quot;_blank&quot;&gt;&quot;卡方检验&quot;&lt;/a&gt;（chi-square test），检验观察值与期望值之间是否存在显著差异。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&amp;emsp;&amp;emsp;卡方统计量 = Σ [ ( 观察值 - 期望值 ) ^ 2 / 期望值 ]\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	计算得到，卡方统计量等于9.82。查表后得到，置信水平0.90、自由度7的卡方分布临界值为12.017。&lt;span style=&quot;font-weight:800;&quot;&gt;因此，卡方统计量小于临界值，这表明枪击案的观察值与期望值之间没有显著差异。&lt;/span&gt;所以，可以接受&quot;发生枪击案的概率是稳定的&quot;假设，也就是说，从统计学上无法得到美国治安正在恶化的结论。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	但是，也必须看到，卡方统计量9.82离临界值很接近，&lt;a href=&quot;http://en.wikipedia.org/wiki/P-value&quot; target=&quot;_blank&quot;&gt;p-value&lt;/a&gt;只有0.18。&lt;span style=&quot;font-weight:800;&quot;&gt;也就是说，对于&quot;美国治安没有恶化&quot;的结论，我们只有82%的把握，还有18%的可能是我们错了，美国治安实际上正在恶化。&lt;/span&gt;因此，这就需要看今后两年中，是否还有大量枪击案发生。如果确实发生了，泊松分布就不成立了。\r\n&lt;/p&gt;\r\n&lt;br /&gt;','使用&quot;泊松分布&quot;（Poisson distribution），判断同一年发生7起枪击案是否巧合。','/Public/uploads/2018-04-10/14ce36d3d539b6006a6cc5d0e550352ac65cb733.jpg',96,1505111314,1505114832,0,0),(6,5,'ruanyifeng','卡辛斯基的警告','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1978年5月25日，美国西北大学的工程教授巴克利·克利斯（Buckley Crist），收到了邮政局退回的一个包裹。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这个包裹寄往芝加哥大学，但是收件人&quot;查无此人&quot;。克利斯教授不记得寄过它，可是发件人却写着自己的名字。他叫来了学校的保安。保安打开了包裹，里面是一颗炸弹，立刻爆炸了。保安身受重伤。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	此后的18年，这样的案件一再发生。凶手一共寄出了16枚邮件炸弹，共炸死3人，炸伤23人。袭击对象主要是大学的理工科教授，所以凶手被称为&quot;大学炸弹客&quot;（Unabomber）。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	FBI 想尽办法要抓住凶手。十几年的调查中，动用了500名特工，误抓了200多名嫌疑犯，查访上万民众，接了2万多通检举电话，花费500万美元，但是一无所获。凶手非常小心，没有留下任何线索。这个案件成了 FBI 历史上最昂贵的调查之一。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1995年4月，凶手又一次作案，一次性寄出了四样东西：两个邮件炸弹，炸死了加州林业协会的总裁吉卜特·莫里，炸断了耶鲁大学计算机科学教授大卫·加勒特的几根手指；一封警告信，警告1993年诺贝尔奖获得者遗传学家理查·罗伯特和菲利普·夏普，要求他们立刻停止基因研究；一篇发给《纽约时报》的长达3.5万字的文章，承诺如果美国主流媒体一字不改地全文刊登，他就将永久停止炸弹袭击。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	FBI 局长和美国司法部长最终同意刊登这篇文章。1995年9月19日，它发表在当天的《纽约时报》和《华盛顿邮报》上，题目叫做《论工业社会及其未来》（Industrial Society and Its Future）。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090903.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	读者惊讶地发现，这居然是一篇充满思辨的哲学论文，作者明显受过学术训练。论文声称，工业革命带来的是人类的灾难，技术使人类丧失自由，最终将导致社会的动荡甚至毁灭，人们应该摧毁现代工业体系。这就是凶手为什么袭击大学教授的原因，因为他们推动了技术的发展。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	更让人吃惊的是，这篇论文很有说服力。许多人开始认真思考作者的观点，主流的知识分子杂志（比如《大西洋》、《纽约人》）专文讨论它。那位被炸断手指的耶鲁大学教授大卫·加勒特承认，文章的推断不无道理，工业文明时代，人类的未来，也许真的险恶重重。Java 语言的发明人计算机学家 Bill Joy 则说，他对文章预言的未来深感困扰。艺术家更是深受影响， 后来的许多小说和电影（比如《黑客帝国》），都能看到这篇论文的影子。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	论文发表以后，FBI 收到一条线索：有人举报，该文的写作风格和论点，很像出自他的弟弟泰德·卡辛斯基（Ted Kaczynski）之手。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1996年4月3日，卡辛斯基在蒙大拿州被逮捕，他住在远离人群的荒野之中，自己搭建了一个小木屋，里面堆满了炸弹原料。至此，邮包炸弹案宣告破案。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090904.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	卡辛斯基的人生很不寻常。他生于1942年，从小就具有超人的数学天才， 16岁被哈佛大学数学系录取。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090901.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1962年进入密歇根大学攻读数学博士，只用了几个月就拿到了博士学位。指导教授说他的博士论文十分深奥，全美只有十几个人能看懂。25岁时，他被加州大学柏克莱分校聘为助理教授，是该校史上最年轻的教授。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090905.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	卡辛斯基在柏克莱只待了不到2年，就辞职了，没有任何理由。他从此脱离学术界，过上了离群索居的生活，1971年，在父母的资助下，他在蒙大拿州一个偏僻的山区盖了一间小木屋，搬到那里去住了。屋子里没有电灯、电话、自来水。平日里他吃自己种的菜、猎捕的食物，晚上点蜡烛看书，砍柴做饭取暖。1978年，他在那里寄出了第一个邮件炸弹，攻击目标是在图书馆里面随机选择的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090902.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	被捕后，卡辛斯基拒绝了律师为其辩护。1998年，被判处终身监禁，不得保释。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090906.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	4、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	《论工业社会及其未来》这篇论文值得细细阅读，它对人类现状和未来的分析描述，是非常震撼的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017090907.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	关于人类的现状，作者的第一句话就是：&quot;工业文明带给人类的是极大的灾难。&quot;\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;工业文明极大地增加了发达国家的人口预期寿命，但也破坏了社会的稳定性，令生活空虚无谓，剥夺了人类的尊严，导致了心理疾病的扩散，还严重地破坏了自然界。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	新技术的最大问题，就是剥夺人类的自由。&quot;自由与技术进步不相容，技术越进步，自由越后退。&quot;\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;新技术改变社会，最后人们会发现，自己将被强制去使用它。比如，自从有了汽车，城市的布局发生了很大改变，大多数人的住宅已经不在工作场所、购物区和娱乐区的步行距离之内，他们不得不依赖汽车。&lt;span style=&quot;font-weight:800;&quot;&gt;人们不再拥有不使用新技术的自由了。&lt;/span&gt;&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一项新技术诞生后，不太可能被拒绝使用，因为&quot;每一项新技术单独考虑都是可取的&quot;，然后人类就会依赖它。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;电力、下水道、无线电话......一个人怎么能反对这些东西呢？怎么能反对数不清的技术进步呢？所有的新技术汇总到一起，就创造出了这样一个世界。&lt;span style=&quot;font-weight:800;&quot;&gt;在这个世界中，普通人的命运不再掌握在他自己手中，而是掌握在政客、公司主管、技术人员和官僚手中。&lt;/span&gt;以遗传工程为例。很少人会反对消灭某种遗传病的基因技术，但是大量的基因修改，会使人变成一种人工设计制造的产品，而不是自然的创造物。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	设想一下，如果基因技术变得成熟和普及，那么政府将不得不管制这种技术，因为万一被滥用，后果不堪设想。这样的话，个人就没有选择，只能接受政府管制，其程度将是前所未有，因为政府将可以管到你的基因结构。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	工业社会要想正常运作，必须遵循一整套严格的规则，这导致&quot;现代人都被一张规则之网所笼罩，在所有重要方面，个人的行为都必须服从这些规则。&quot;这导致所有人在本质上都高度类似。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;今天，在技术发达地区，人们的生活方式十分相像。芝加哥的一个基督教银行职员，东京的一个佛教银行职员，莫斯科的一个共产党银行职员，他们彼此之间的日常生活十分相像，而他们的生活与1000年以前人们的生活却非常不同。这就是技术进步的结果......&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	最终，&quot;&lt;span style=&quot;font-weight:800;&quot;&gt;技术完全控制地球上的一切，人类自由基本上将不复存在，因为个人无法对抗用超级技术武装起来的大型组织。&lt;/span&gt;只有极少数人握有真正的权力，但甚至就连他们的自由也是十分有限的，因为他们的行为也是受到管制的。&quot;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	关于人类的未来，卡辛斯基假设 &quot;计算机科学家成功地开发出了智能机器，这些机器无论做什么事都比人类强。在这种情况下，大概所有工作都会由巨大的、高度组织化的机器系统去做，而不再需要任何人类的努力。&quot;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这时可能会有两种情况发生。&quot;一种是允许机器在没有人类监督的情况下，自已做出所有的决策，另一种是人类保留对于机器的控制。&quot;\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;如果我们允许机器自己做出所有的决策，人类的命运那时就全凭机器发落了。人们也许会反驳，人类决不会愚蠢到把全部权力都交给机器。但我们既不是说人类会有意将权力交给机器，也不是说机器会存心夺权。我们实际上说的是，人类可能会轻易地让自己沦落到一个完全依赖机器的位置，沦落到不能做出任何实际选择，只能接受机器的所有决策的地步。&lt;span style=&quot;font-weight:800;&quot;&gt;随着社会及其面临的问题变得越来越复杂，而机器变得越来越聪明，人们会让机器替他们做更多的决策。仅仅是因为机器做出的决策会比人的决策带来更好的结果。最后，维持体系运行所必需的决策已变得如此之复杂。以至于人类已无能力明智地进行决策。&lt;/span&gt;在这一阶段，机器实质上已处于控制地位。人们已不能把机器关上，因为我们已如此地依赖于机器，关上它们就等于是自杀。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	就算人们想尽办法，保留对机器的控制权，结果也会很糟。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;另一方面，也可能人类还能保持对机器的控制。在这种情况下，一般人也许可以控制自己的私人机器，如他的汽车或计算机，但对于大型机器系统的控制权将落入一小群精英之手----就像今天一样。&lt;span style=&quot;font-weight:800;&quot;&gt;由于技术的改进，精英对于大众的控制能力将会极大提高，因为人不再必需工作，大众就成为了多余的人，成为了体系的无用负担。&lt;/span&gt;如果精英集团失去了怜悯心，他们完全可以决定灭绝人类大众。如果他们有些人情味，他们也可以使用宣传或其他心理学或生物学技术降低出生率，直至人类大众自行消亡，让这个世界由精英们独占。&quot;\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;或者，如果精英集团是由软心肠的自由派人士组成的，他们将注意保证每个人的生理需求都得到满足，每一个孩子都在心理十分健康的条件下被抚养成人，每一个人都有一项有益于健康的癖好来打发日子，每一个可能会变得不满的人都会接受治疗以治愈其\'疾病\'。&lt;span style=&quot;font-weight:800;&quot;&gt;当然，生活是如此没有目的，以致于人们都不得不经过生物学的或心理学的改造，以去除他们的权力欲，或使他们的权力欲\'升华\'为无害的癖好。&lt;/span&gt;这些经过改造的人们也许能在这样一个社会中生活得平和愉快，但他们决不会自由。他们将被贬低到家畜的地位。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	6、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	退一步说，如果前面的假设不成立，人工智能没有取得成功，人的工作还是必要的，但是&quot;即使这种情况，机器也将承担越来越多的简单工作，而低能力的工人将越来越过剩（正如我们所见，这种事已经发生了。许多人很难或根本找不到工作，因为他们由于智力或心理原因，而不能达到体系所需要的训练水平）。&quot;\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;&lt;span style=&quot;font-weight:800;&quot;&gt;对于那些找到工作的人，就业的要求会越来越高。他们将需要越来越多的训练，越来越强的能力，他们将不得不越来越可靠、越来越规矩、越来越驯服，因为他们将越来越像巨型有机体的细胞。&lt;/span&gt;他们的任务将越来越专门化，因而他们的工作在某种意义上也将越来越脱离真实世界，仅集中于现实的一块小碎片。体系将使用一切可以使用的心理学或生物学手段来设计制造人类，使之驯顺，使之具有体系要求的能力。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	机器接管了大部分具有真正重要性的工作以后，留给人类的（或者说普通人有能力从事的）都是一些相对不那么重要的工作。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;例如有人建议，大力发展服务业可以给人类提供工作机会。这样人们就可以把时间花在互相擦皮鞋上面，可以用出租车带着彼此到处瞎转，互相为对方做手工艺品，互相给对方端盘子等等。&lt;span style=&quot;font-weight:800;&quot;&gt;人类如果最终以这样的方式结局，那对于我们来说也实在是太可怜了，而且我们怀疑有多少人会觉得这样的无意义的忙碌等同于充实的生活。&lt;/span&gt;他们会去寻找危险的其他渲泄途径（毒品、犯罪、邪教、仇恨群体等），除非他们经过生物学或心理学的设计改造后适应了这种生活方式。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	7、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	卡辛斯基的结论就是，未来要么人类无法幸存下来，要么个人空前地依赖大型组织，空前地&quot;社会化&quot;，人类的生理和心理是设计和改造的结果，而不是自然的产物。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	唯一的解决方法就是放弃科学技术，&quot;把这个腐朽的体系整个扔进垃圾堆，并勇敢地承受其后果。&quot;\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;我们希望已经说服了读者，体系无法通过改革来调和自由与技术。唯一的出路是摒弃整个工业-技术休系。这意味着革命，不一定是武装起义，但肯定是激烈而根本的社会性质变化。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	卡辛斯基认为，这个体系是由技术人员为了自己的利益和声望在推动前进。&quot;体系需要科学家、数学家与工程师，否则就无法正常运作。&quot;因此他选择这些人作为袭击目标。这样做当然是邪恶的，但是他对于人类命运的警告却理应受到重视。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	卡辛斯基反复提及，引入新技术一定要慎而又慎。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;&lt;span style=&quot;font-weight:800;&quot;&gt;一项新技术被引入社会时，将会引发一长串其他变化，这些变化之中的大部分是不可预见的。&lt;/span&gt;历史经验告诉我们，技术进步给社会带来新问题的速度，远比它解决旧问题的速度要快。技术已将人类带入了一条无法轻易逃脱的死胡同。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	技术会有我们难以预测的长期后果。比如，抗生素的目的是消灭细菌，但是大量使用后却产生了难以杀死的超级细菌，人们不得不限制抗生素的使用；再比如，医疗技术提高了人类的寿命，但也因此导致了地球的人口激增、社会老龄化、生育率下降等重大的社会变化，这些恐怕都不是技术的发明者能想到的。如果新技术（比如机器人技术、基因工程、纳米技术）被恐怖主义组织掌握，后果就更可怕。如果不是真人，而是机器人在街头发动恐怖袭击，那会是怎样的情景？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	距离《论工业社会及其未来》的发表，已经过去了20多年，互联网和人工智能都变成了现实，基因技术开始萌芽。人类对于新技术的入迷简直到了无以复加的地步，恨不得越多越好，一项新技术还在实验室中，人们就开始计划如何尽快形成生产力，占领尽可能多的市场。卡辛斯基的预言似乎一步步正在变成现实，人类正毫不在意地亲手加速自己的毁灭。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（说明：本文选自我正在写的新书《未来世界的幸存者》，点击&lt;a href=&quot;http://survivor.ruanyifeng.com/&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;免费阅读全书。）\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（正文完）\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	======================================================\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	《论工业社会及其未来》原文摘录\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	工业革命极大增加了城市规模和城市人口比例，而人群聚集会增加压力与攻击性。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	技术变革导致现代社会的变化十分迅速，因此整个社会不存在稳定的框架和价值观。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	有些人急于拯救自由却不愿牺牲技术带来的所谓好处，他们会提出天真的新式社会构想来调和自由与技术。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	所有人都理所当然地认为，每一个人都必需向技术的需要低头，而且理由十分充分：如果人的需求被摆在了优先于技术需要的地位，就会出现经济问题、失业、短缺甚至更糟。在我们的社会当中，&quot;精神健康&quot;的概念主要被定义为在多大程度一个人能够根据体系的需要行事并且不会流露出承受精神压力的迹象。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	经济体系所能容纳的企业数是有限的，我们大多数人只有成为别人的雇员才可以生存。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	工业-技术体系可能幸存也可能崩溃。假如该体系幸存下来，可能最终将会降低生理与心理的痛苦水平，但在此之前必须经历一段漫长而痛苦的调整期，而且人类与众多其他生命体也将付出惨重代价，永远沦为社会机器上的齿轮。更有甚者，假如这个体系幸存下来，将会导致不可避免的后果：没有任何方法能够改革或改进这一体系，使之不至于剥夺人的尊严与自主。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	假如这一体系崩溃，结果依旧会十分痛苦。但是体系规模越大，崩溃造成的结果就越可怕。因此假如真要崩溃的话最好赶早不赶迟。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	所以我们主张发动针对工业体系的革命。这场革命可能使用或不使用暴力，可能突然完成也可能在几十年时间里相对循序渐进地进行。我们无法预测这一点。但是我们的确为那些憎恨工业体系的人们勾勒了一套十分宽泛的方法，从而为反对这一特定社会形式的革命铺平道路。这不是一场政治革命。革命目标并非推翻政府，而是颠覆现存社会的经济与技术基础。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一般来说科学家都是这样。可能其中也有少数例外，但总体而言他们的动机既不是好奇也不是造福人类，而是完成权力过程的需要。其他动机对于许多科学家来说也有作用，例如金钱与地位。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	科学技术也构成了群体权力运动，许多科学家都通过认同这一运动来满足自己的权力需求。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	因此科学盲目地前进，不考虑人类种族的真正福祉或任何其他标准，仅仅服从科学家以及提供研究资金的政府官员与企业高管的心理需求。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	体系需要科学家、数学家与工程师，否则就无法正常运作。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	遗传工程的伦理规范事实上将成为管制人类遗传构造的手段。一部分人（多半是上层阶级）将决定如此这般的遗传工程合乎&quot;道德&quot;，如此这般的做法则不道德，因而他们将在实际上将自己的价值观强加于整个人口的遗传构造。即使伦理规范是以完全民主的方式选择出来的，多数族裔也会将他们自己的价值观强加于那些很可能对于如何 &quot;道德地&quot;运用遗传工程另有看法的少数族裔。真正能够保护自由的伦理规范只能是一挑，那就是禁止任何人类遗传工程。而我们可以十分有把握地说，这一点恰恰不可能在技术社会中得到实现。任何将遗传工程贬低成配角的规范都不可能维持下去，因为生物技术的巨大力量所产生的诱惑是无法抗拒的。特别是在大多数人看来，大量生物技术的应用显然且肯定是有益的（可以根除身体与精神疾病，赋予人们当今世界所需要的能力）。基因技术必将不可避免地得到大规模应用，但应用方式只能与工业-技术体系的需求相一致。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	技术之所以是如此强有力的社会力量的另一个理由是，在给定社会的条件下技术进步只会不可逆地朝一个方向前进。只要某项技术发明被引进，人们就往往会对其产生依赖，除非它被某种更先进的发明所取代。人们不仅仅作为个人依赖这项新技术。甚至体系作为一个整体都会依赖它。（例如请想像一下，如果没有了计算机，今天的体系会怎么样）因此，体系只能朝向更加技术化的方向移动。在不至于颠覆整个技术体系的前提下，技术将会不断地逼迫自由后退。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	技术的进步十分迅速并在许多方面威胁自由（拥挤、规章制度、个人对于大型组织越发严重的依赖、宣传与其他心理学技术、遗传工程、通过监视设备和计算机侵犯隐私，等等），阻挡任何一项对于自由的威胁都需要一场单独的社会斗争。那些想要保卫自由的人会被无数的新攻势及其发展速度所压倒，他们会变得微不足道并停止抵抗。分别反击这些威胁是无效的。只有把技术体系作为一个整体来反击才有成功的希望，但这就是革命而不是改革了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	人们倾向于想当然地认为，由于革命带来的变化比改革大，所以革命也就比改革更难发动。实际上，在某些条件下革命比改革容易得多。这是因为一场革命运动能够激发出人们极大的献身热情，而一场改革运动却不能。一场革命运动许诺一下子解决所有问题并创造整个新世界；它提供人民为之甘冒风险、甘作牺牲的理想。由于这些理由，推翻整个技术体系要比对技术的某一部分----如遗传工程的应用发展----进行有效、持久的限制容易得多。在适当的条件下，许许多多的人会热情地献身于推翻工业技术体系的革命。正如我们提到的那样，寻求限制技术的某些方面的改革者是为了避免不良后果而工作。然而，革命者是为了获得强力的报偿一一实现其革命理想----而工作，因此他们比改革者更努力且更执著。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	现代社会不是去改变那些使人们抑郁的条件，而是给人们抗抑郁药。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	但另一方面，请假设今后几十年的压力超出了体系的承受能力。如果体系崩溃，可能会右一个混乱时期，&quot;动乱年代&quot;，就像在过去各个对代历史所记载的那样。不可能预见动乱年代最后会产生什么结果。但无论如何人类会被赋予一个新机会。最大的危险是工业化社会很可能在崩溃后不几年就开始重组其自身，肯定会有许多人（特别是权力饥渴型的人们）急于重新开动工厂。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	工业体系将人类贬低到了被奴役的状态，而憎恨这种被奴役状态的人则面临两个任务。第一，我们必须增强体系内的社会紧张态势，以加快其崩溃或把它弱化到足够程度，使得反对体系的革命成为可能。第二，当体系充分弱化时，我们必须发展并宣传一种反对技术和工业社会的意识形态。当工业社会崩溃时，这种意识形态将有助于保证其残余被粉碎到无法修复的地步，这样体系就无法重组。工厂将被捣毁，技术书籍将被烧掉，等等。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	工业体系的崩溃不会纯粹是革命行动的结果，它不会那么难以抵御革命的攻击，除非它自身内部的发展问题导致了极为严重的困难。因此如果体系崩溃，那么它或是自发崩溃，或是部分自发、部分由革命者促发的崩溃。如果崩溃是突如其来的，许多人都会死去，因为世界人口已如此过分膨胀，离开了先进技术就无法养活自己。甚至即使崩溃足够缓慢，人口的减少可以主要通过出生率的降低而不是死亡率的提高而实现，非工业化的过程也多半是极度混乱和极度痛苦的。幻想通过平稳控制的有序方式逐步废除技术是天真的，特别是要考虑到技术爱好者们的负隅顽抗。那么，致力于体系的崩溃是否因此就十分残酷呢？也许是，也许不是。首先，除非体系本来就已经陷入了深重的困难，无论如何都很可能最终自行崩溃，否者单靠革命者是不可能强行使其崩溃的。而且体系发展得规模越大，崩溃的后果就越严重。因此加速体系崩溃的革命者或许反倒控制了灾难的规模。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	其次，我们必须权衡斗争与死亡和丧失自由与尊严这两方面的得失。对于我们之中的许多人来说，自由与尊严比长寿和避免肉体痛苦更重要。再者，我们早晚会死，死于为生存或为某一事业而战，强于活得空虚而无目的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	第三，体系的存续所带来的痛苦并不一定就比体系崩溃所带来的痛苦更少。在全世界范围内，体系已经招致、并且正在招致的巨大痛苦曾使人类千百年与他人以及环境和睦相处的古代文化被与其解接触的工业社会所摧毁。其结果就是全方位的经济、环境、社会和心理问题。工业杜会的侵扰所产生的影响之一，就是传统的人口控制在全球范围内一下子失去了平衡，因而产生了人口爆炸及其所有连带后果。接着就是心理疾病席卷了整个所谓&quot;幸运&quot;的西方社会。没有人知道臭氧层耗尽、温室效应及其他现在还不能预测的环境问题最终会为这个世界带来怎样的后果。而且就像核扩散已经显示的那样，我们无法防止新技术落入独裁者和不负责任的第三世界国家手中。愿意猜猜伊位克或北朝鲜将用遗传工程来干什么吗?\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&quot;嗨！&quot;技术爱好者们会说，&quot;科学能解决所有这些问题！我们将征服饥荒、消灭心理病痛，让每一个人都健康而快乐！&quot;是的，是的。他们200年前就是这么说的。人们曾指望工业社会能够消灭贫穷，使每一个人都快乐，等等。实际结果却不是那么回事。技术爱好者对社会问题的理解简直是无可救药地天真（或自欺欺人）。他们没有意识到（或故意视而不见）这样一个事实：当巨大的变化，即使是看上去有利的变化，被引入一个社会时，将会引发一长串其他变化，这些变化之中的大都分是不可预见的其结果则是社会的混乱。因此，技术爱好者们在试图消灭贫穷和疾病，设计制造驯顺、快乐的人格等等时，很可能会创造出比现在还糟糕的社会体系。例如，科学家们吹嘘说他们能够创造出新的、经遗传工程改造的粮食植物以消灭饥荒。然而，这将会允许人日无限膨胀下去，而众所周知，拥挤会导致紧张和攻击性的增强。这仅仅是技术会导致的可预见问题中的一个例子。我们强调指出，历史经验告诉我们，技术进步给社会带来新问题的速度远比它解决旧问题的速度要快。因此技术爱好者们要经过一个漫长的试错时期才能够为他们的美丽新世界排除掉所有的故障（假设他们最终能做到的话）。而与此同时所产生的痛苦将会如此巨大，以至于体系生存下去所带来的痛苦不见得就比体系崩溃更少。技术己将人类带入了一条无法轻易逃脱的死胡同。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	更好的办法是把这个腐朽的体系整个扔进垃圾堆，并勇敢地承受其后果。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	现在的两个主要任务是在工业社会中促进社会紧张与不稳定，以及宣传一种反对技术和工业体系的意识形态。当体系变得足够紧张和不稳定时，一场反对技术的革命就有机会发动了。这一模式将十分类似于法国和俄国革命。在两国各自革命之前的几十年里，法国和俄国社会都显示出了越来越多的紧张与脆弱迹象。同时，提供一个与旧世界完全不同的新世界愿景的意识形态发展了起来。以俄国的情况为例，革命者积极从事于破坏旧秩序的工作。然后当旧体系面临着足够的额外紧张时（法国是财政危机，俄国是军事失败），它就会被革命一扫而光。我们预想的就是这样的道路。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	大多数革命都有两个目标，一个目标是摧毁一个旧社会，另一个目标是建立革命者想像的新社会。法国和俄国的革命者没有能够成功地建立他们所梦想的新社会（这是十分幸运的事），但她们非常成功地摧毁了既存社会。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然而，一种意识形态如想争取到热情支持，除了负面理想外必须还有正面理想，决不能只破不立。我们的正面理想是自然，即野生自然，按照其本来面目运行的地球，不依赖于人类管理、摆脱人类干涉和控制的地球生灵。我们的野生自然也包括人类本性，即不受有组织社会管制、自主运行的个人，成为偶然性或自由意志或上帝（由你的宗教或哲学观念）的产物。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一个社会的经济与技术结构在决定一般人的生活方式方面远比政治结构更加重要。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我们不应主张无力或消极，我们应主张打破工业体系的权力，而这将大大增加个人和小群体的权力和自由。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（据称）贯穿整个历史，技术都是进步的，从未退步过，因此技术退步是不可能的。但这并非事实。对于&quot;进步&quot;的热情是现代社会形态的特殊现象，在大约十七世纪之前并不存在。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（完）\r\n&lt;/p&gt;\r\n&lt;br /&gt;','1978年5月25日，美国西北大学的工程教授巴克利·克利斯（Buckley Crist），收到了邮政局退回的一个包裹。\r\n这个包裹寄往芝加哥大学，但是收件人&quot;查无此人&quot;。克利斯教授不记得寄过它，可是发件人却写着自己的名字。他叫来了学校的保安。保安打开了包裹，里面是一颗炸弹，立刻爆炸了。保安身受重伤。','/Public/uploads/2018-04-10/u=810863013,2399129550&fm=27&gp=0.jpg',5,1505355499,0,0,0),(7,3,'ruanyifeng','全文搜索引擎 Elasticsearch 入门教程','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;a href=&quot;https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E&quot; target=&quot;_blank&quot;&gt;全文搜索&lt;/a&gt;属于最常见的需求，开源的&amp;nbsp;&lt;a href=&quot;https://www.elastic.co/&quot; target=&quot;_blank&quot;&gt;Elasticsearch&lt;/a&gt;&amp;nbsp;（以下简称 Elastic）是目前全文搜索引擎的首选。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	它可以快速地储存、搜索和分析海量数据。维基百科、Stack Overflow、Github 都采用它。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017081701.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 的底层是开源库&amp;nbsp;&lt;a href=&quot;https://lucene.apache.org/&quot; target=&quot;_blank&quot;&gt;Lucene&lt;/a&gt;。但是，你没法直接用 Lucene，必须自己写代码去调用它的接口。Elastic 是 Lucene 的封装，提供了 REST API 的操作接口，开箱即用。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	本文从零开始，讲解如何使用 Elastic 搭建自己的全文搜索引擎。每一步都有详细的说明，大家跟着做就能学会。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一、安装\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 需要 Java 8 环境。如果你的机器还没安装 Java，可以参考&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-debian-8&quot; target=&quot;_blank&quot;&gt;这篇文章&lt;/a&gt;，注意要保证环境变量JAVA_HOME正确设置。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	安装完 Java，就可以跟着&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-targz.html&quot; target=&quot;_blank&quot;&gt;官方文档&lt;/a&gt;安装 Elastic。直接下载压缩包比较简单。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ wget https&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;artifacts&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;elastic&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;co&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;downloads&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;elasticsearch&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;elasticsearch&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;-5.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;zip\r\n$ unzip elasticsearch&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;-5.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;zip\r\n$ cd elasticsearch&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;-5.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	接着，进入解压后的目录，运行下面的命令，启动 Elastic。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;bin&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;elasticsearch&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果这时&lt;a href=&quot;https://github.com/spujadas/elk-docker/issues/92&quot; target=&quot;_blank&quot;&gt;报错&lt;/a&gt;&quot;max virtual memory areas vm.max&lt;span&gt;map&lt;/span&gt;count [65530] is too low&quot;，要运行下面的命令。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ sudo sysctl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;w vm&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;max_map_count&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;262144&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果一切正常，Elastic 就会在默认的9200端口运行。这时，打开另一个命令行窗口，请求该端口，会得到说明信息。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl localhost&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;9200&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;atntrTf&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;cluster_name&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;elasticsearch&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;cluster_uuid&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;tf9250XhQ6ee4h7YI11anA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;version&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;number&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;5.5.1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;build_hash&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;19c13d0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;build_date&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;2017-07-18T20:44:24.823Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;build_snapshot&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;lucene_version&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;6.6.0&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;tagline&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;You Know, for Search&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，请求9200端口，Elastic 返回一个 JSON 对象，包含当前节点、集群、版本等信息。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	按下 Ctrl + C，Elastic 就会停止运行。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	默认情况下，Elastic 只允许本机访问，如果需要远程访问，可以修改 Elastic 安装目录的config/elasticsearch.yml文件，去掉network.host的注释，将它的值改成0.0.0.0，然后重新启动 Elastic。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;network&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0.0&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，设成0.0.0.0让任何人都可以访问。线上服务不要这样设置，要设成具体的 IP。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	二、基本概念\r\n&lt;/h2&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.1 Node 与 Cluster\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 本质上是一个分布式数据库，允许多台服务器协同工作，每台服务器可以运行多个 Elastic 实例。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	单个 Elastic 实例称为一个节点（node）。一组节点构成一个集群（cluster）。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.2 Index\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 会索引所有字段，经过处理后写入一个反向索引（Inverted Index）。查找数据的时候，直接查找该索引。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	所以，Elastic 数据管理的顶层单位就叫做 Index（索引）。它是单个数据库的同义词。每个 Index （即数据库）的名字必须是小写。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下面的命令可以查看当前节点的所有 Index。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X GET &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'&lt;a class=&quot;token url-link&quot; href=&quot;http://localhost/&quot;&gt;http://localhost&lt;/a&gt;:9200/_cat/indices?v\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.3 Document\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Index 里面单条的记录称为 Document（文档）。许多条 Document 构成了一个 Index。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Document 使用 JSON 格式表示，下面是一个例子。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;张三&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;工程师&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;desc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;数据库管理&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	同一个 Index 里面的 Document，不要求有相同的结构（scheme），但是最好保持相同，这样有利于提高搜索效率。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2.4 Type\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Document 可以分组，比如weather这个 Index 里面，可以按城市分组（北京和上海），也可以按气候分组（晴天和雨天）。这种分组就叫做 Type，它是虚拟的逻辑分组，用来过滤 Document。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	不同的 Type 应该有相似的结构（schema），举例来说，id字段不能在这个组是字符串，在另一个组是数值。这是与关系型数据库的表的&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/guide/current/mapping.html&quot; target=&quot;_blank&quot;&gt;一个区别&lt;/a&gt;。性质完全不同的数据（比如products和logs）应该存成两个 Index，而不是一个 Index 里面的两个 Type（虽然可以做到）。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下面的命令可以列出每个 Index 所包含的 Type。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/_mapping?pretty=true\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	根据&lt;a href=&quot;https://www.elastic.co/blog/index-type-parent-child-join-now-future-in-elasticsearch&quot; target=&quot;_blank&quot;&gt;规划&lt;/a&gt;，Elastic 6.x 版只允许每个 Index 包含一个 Type，7.x 版将会彻底移除 Type。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	三、新建和删除 Index\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	新建 Index，可以直接向 Elastic 服务器发出 PUT 请求。下面的例子是新建一个名叫weather的 Index。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X PUT &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/weather\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	服务器返回一个 JSON 对象，里面的acknowledged字段表示操作成功。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;acknowledged&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;shards_acknowledged&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，我们发出 DELETE 请求，删除这个 Index。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X DELETE &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/weather\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	四、中文分词设置\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	首先，安装中文分词插件。这里使用的是&amp;nbsp;&lt;a href=&quot;https://github.com/medcl/elasticsearch-analysis-ik/&quot; target=&quot;_blank&quot;&gt;ik&lt;/a&gt;，也可以考虑其他插件（比如&amp;nbsp;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-smartcn.html&quot; target=&quot;_blank&quot;&gt;smartcn&lt;/a&gt;）。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;$ &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;bin&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;elasticsearch&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;plugin install https&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;github&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;medcl&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;elasticsearch&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;analysis&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;ik&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;releases&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;download&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;v5&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;elasticsearch&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;analysis&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;ik&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;-5.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;zip&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码安装的是5.5.1版的插件，与 Elastic 5.5.1 配合使用。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	接着，重新启动 Elastic，就会自动加载这个新安装的插件。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，新建一个 Index，指定需要分词的字段。这一步根据数据结构而异，下面的命令只针对本文。基本上，凡是需要搜索的中文字段，都要单独设置一下。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X PUT &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;mappings&quot;: {\r\n    &quot;person&quot;: {\r\n      &quot;properties&quot;: {\r\n        &quot;user&quot;: {\r\n          &quot;type&quot;: &quot;text&quot;,\r\n          &quot;analyzer&quot;: &quot;ik_max_word&quot;,\r\n          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;\r\n        },\r\n        &quot;title&quot;: {\r\n          &quot;type&quot;: &quot;text&quot;,\r\n          &quot;analyzer&quot;: &quot;ik_max_word&quot;,\r\n          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;\r\n        },\r\n        &quot;desc&quot;: {\r\n          &quot;type&quot;: &quot;text&quot;,\r\n          &quot;analyzer&quot;: &quot;ik_max_word&quot;,\r\n          &quot;search_analyzer&quot;: &quot;ik_max_word&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，首先新建一个名称为accounts的 Index，里面有一个名称为person的 Type。person有三个字段。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			user\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			title\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			desc\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这三个字段都是中文，而且类型都是文本（text），所以需要指定中文分词器，不能使用默认的英文分词器。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 的分词器称为&amp;nbsp;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html&quot; target=&quot;_blank&quot;&gt;analyzer&lt;/a&gt;。我们对每个字段指定分词器。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;analyzer&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;ik_max_word&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;search_analyzer&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;ik_max_word&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，analyzer是字段文本的分词器，search_analyzer是搜索词的分词器。ik_max_word分词器是插件ik提供的，可以对文本进行最大数量的分词。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	五、数据操作\r\n&lt;/h2&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5.1 新增记录\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	向指定的 /Index/Type 发送 PUT 请求，就可以在 Index 里面新增一条记录。比如，向/accounts/person发送请求，就可以新增一条人员记录。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X PUT &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/1\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;user&quot;: &quot;张三&quot;,\r\n  &quot;title&quot;: &quot;工程师&quot;,\r\n  &quot;desc&quot;: &quot;数据库管理&quot;\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	服务器返回的 JSON 对象，会给出 Index、Type、Id、Version 等信息。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_version&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;result&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;created&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_shards&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;successful&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;created&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果你仔细看，会发现请求路径是/accounts/person/1，最后的1是该条记录的 Id。它不一定是数字，任意字符串（比如abc）都可以。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	新增记录的时候，也可以不指定 Id，这时要改成 POST 请求。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X POST &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;user&quot;: &quot;李四&quot;,\r\n  &quot;title&quot;: &quot;工程师&quot;,\r\n  &quot;desc&quot;: &quot;系统管理&quot;\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，向/accounts/person发出一个 POST 请求，添加一个记录。这时，服务器返回的 JSON 对象里面，_id字段就是一个随机字符串。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;AV3qGfrC6jMbsbXb6k1p&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_version&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;result&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;created&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_shards&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;successful&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;created&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	注意，如果没有先创建 Index（这个例子是accounts），直接执行上面的命令，Elastic 也不会报错，而是直接生成指定的 Index。所以，打字的时候要小心，不要写错 Index 的名称。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5.2 查看记录\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	向/Index/Type/Id发出 GET 请求，就可以查看这条记录。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/1?pretty=true\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码请求查看/accounts/person/1这条记录，URL 的参数pretty=true表示以易读的格式返回。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	返回的数据中，found字段表示查询成功，_source字段返回原始记录。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_version&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;found&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_source&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;user&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;张三&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;工程师&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;desc&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;数据库管理&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果 Id 不正确，就查不到数据，found字段就是false。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/weather/beijing/abc?pretty=true\'&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;abc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;found&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5.3 删除记录\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	删除记录就是发出 DELETE 请求。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X DELETE &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/1\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这里先不要删除这条记录，后面还要用到。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5.4 更新记录\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	更新记录就是使用 PUT 请求，重新发送一次数据。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;X PUT &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/1\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n    &quot;user&quot; : &quot;张三&quot;,\r\n    &quot;title&quot; : &quot;工程师&quot;,\r\n    &quot;desc&quot; : &quot;数据库管理，软件开发&quot;\r\n}\'&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_version&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;result&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;updated&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_shards&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;successful&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;created&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，我们将原始数据从&quot;数据库管理&quot;改成&quot;数据库管理，软件开发&quot;。 返回结果里面，有几个字段发生了变化。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_version&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;result&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;updated&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;created&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;false&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	可以看到，记录的 Id 没变，但是版本（version）从1变成2，操作类型（result）从created变成updated，created字段变成false，因为这次不是新建记录。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	六、数据查询\r\n&lt;/h2&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	6.1 返回所有记录\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	使用 GET 方法，直接请求/Index/Type/_search，就会返回所有记录。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/_search\'&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;took&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;timed_out&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_shards&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;successful&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;hits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;max_score&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;hits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;AV3qGfrC6jMbsbXb6k1p&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_score&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_source&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;李四&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;工程师&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;desc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;系统管理&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_score&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_source&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;user&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;张三&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;工程师&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;desc&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;数据库管理，软件开发&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，返回结果的&amp;nbsp;took字段表示该操作的耗时（单位为毫秒），timed_out字段表示是否超时，hits字段表示命中的记录，里面子字段的含义如下。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			total：返回记录数，本例是2条。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			max_score：最高的匹配程度，本例是1.0。\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			hits：返回的记录组成的数组。\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	返回的记录中，每条记录都有一个_score字段，表示匹配的程序，默认是按照这个字段降序排列。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	6.2 全文搜索\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 的查询非常特别，使用自己的&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl.html&quot; target=&quot;_blank&quot;&gt;查询语法&lt;/a&gt;，要求 GET 请求带有数据体。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/_search\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;软件&quot; }}\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码使用&amp;nbsp;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-match-query.html&quot; target=&quot;_blank&quot;&gt;Match 查询&lt;/a&gt;，指定的匹配条件是desc字段里面包含&quot;软件&quot;这个词。返回结果如下。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;took&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;timed_out&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot; style=&quot;color:#990055;&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_shards&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;successful&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;hits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;total&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;max_score&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0.28582606&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;hits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_index&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;accounts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_score&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0.28582606&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;_source&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;user&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;张三&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;工程师&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;desc&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;&quot;数据库管理，软件开发&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;}&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Elastic 默认一次返回10条结果，可以通过size字段改变这个设置。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/_search\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;管理&quot; }},\r\n  &quot;size&quot;: 1\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码指定，每次只返回一条结果。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	还可以通过from字段，指定位移。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/_search\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;管理&quot; }},\r\n  &quot;from&quot;: 1,\r\n  &quot;size&quot;: 1\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码指定，从位置1开始（默认是从位置0开始），只返回一条结果。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:500;font-size:1.87em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	6.3 逻辑运算\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果有多个搜索关键字， Elastic 认为它们是or关系。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/_search\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;软件 系统&quot; }}\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码搜索的是软件 or 系统。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果要执行多个关键词的and搜索，必须使用&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-bool-query.html&quot; target=&quot;_blank&quot;&gt;布尔查询&lt;/a&gt;。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ curl &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'localhost:9200/accounts/person/_search\'&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token string&quot; style=&quot;color:#669900;&quot;&gt;\'\r\n{\r\n  &quot;query&quot;: {\r\n    &quot;bool&quot;: {\r\n      &quot;must&quot;: [\r\n        { &quot;match&quot;: { &quot;desc&quot;: &quot;软件&quot; } },\r\n        { &quot;match&quot;: { &quot;desc&quot;: &quot;系统&quot; } }\r\n      ]\r\n    }\r\n  }\r\n}\'&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	七、参考链接\r\n&lt;/h2&gt;\r\n&lt;ul style=&quot;color:#111111;font-family:Georgia, serif;font-size:10px;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html&quot; target=&quot;_blank&quot;&gt;ElasticSearch 官方手册&lt;/a&gt;\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://www.elastic.co/blog/a-practical-introduction-to-elasticsearch&quot; target=&quot;_blank&quot;&gt;A Practical Introduction to Elasticsearch&lt;/a&gt;\r\n	&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（完）\r\n&lt;/p&gt;\r\n&lt;br /&gt;','全文搜索属于最常见的需求，开源的 Elasticsearch （以下简称 Elastic）是目前全文搜索引擎的首选。\r\n它可以快速地储存、搜索和分析海量数据。维基百科、Stack Overflow、Github 都采用它。','/Public/uploads/2018-04-10/u=1973981976,1270605195&fm=27&gp=0.jpg',9,1505355606,0,0,0),(8,5,'laurance','PHP的性能演进(从PHP5.0到PHP7.1的性能全评测)','&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	&lt;b&gt;本文是最初是来自国外的这篇:&lt;a href=&quot;https://www.phpclasses.org/blog/post/493-php-performance-evolution.html&quot;&gt;PHP Performance Evolution 2016&lt;/a&gt;， 感谢高可用架构公众号翻译成了中文版, 此处是转载的高可用架构翻译后的文章&lt;a href=&quot;http://weibo.com/ttarticle/p/show?id=2309404052280251914593&quot;&gt;从PHP 5到PHP 7性能全评测（含未发布的JIT版PHP 8对比）&lt;/a&gt;, 稍微调整了格式而成。&lt;br /&gt;\r\n&lt;/b&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	&lt;i&gt;导读：PHP 是 Web 开发最常用的语言，每个大版本的更新都带来不少新特性和性能提升。特别是 PHP 7.0 的发布，带来 PHP 性能飞跃。本文作者对各个 PHP 版本进行了 CPU 性能基准测试，并且带来了PHP下个大版本的消息。本文中文版由高可用架构志愿者翻译。&lt;/i&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	自 1994 年 Rasmus Lerdorf 创建 PHP 以来， PHP 语言经历了许多改进，其中性能是开发人员在评估新版本时考虑的主要标准之一。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	阅读这篇文章，可以了解从 PHP 5 到 7（包括 7.1）的性能提升，同时也将了解到即将加入到 PHP 8 的试验性的 JIT 分支版本的性能。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:normal;font-size:1.5em;font-family:&amp;quot;vertical-align:baseline;color:#111111;background-color:#FFFFFF;&quot;&gt;\r\n	简介\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	本文将根据时间作出更新，增加更多信息和基准测试结果，包括尚未发布的新版本，以便更好地了解多年来 PHP 性能演变。如果您有更正或建议改进，请在文后留言。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	自 1994 年 Rasmus Lerdorf 创建 PHP 以来， PHP 语言经历了激烈的演进。虽然第一版是一个简单的一人开发的 CGI 程序，Rasmus Lerdorf、Andi Gutmans 和 Zeev Suraski 加入了该语言的第三个版本的开发，并根本性重新设计。从那之后， PHP 开发组也创建并发展起来。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	随着项目的发展，由于 PHP 3 天然的可扩展性， PHP 在核心和附加扩展开发的功能得到了蓬勃发展，如网络通信，解析，缓存和数据库支持。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	语言本身也在发展，带来了一系列的改进。这包括支持面向对象的结构，例如类，接口， traits，闭包等。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	对于许多开发人员来说，仅有新功能是不够的。随着语言越来越受欢迎， PHP 社区对于提供更好性能，可扩展性和更少内存使用的需求越来越强烈。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	PHP 开发团队近 20 年来一直致力于解决这些需求，虽然 PHP 3 的引入大大提高了性能，但直到 Andi Gutmans 和 Zeev Suraski 引入 Zend Engine 并发布 PHP 4， PHP 的性能才开始变得正式起来。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	2000 年推出的新的内存编译器和执行器模型大大提高了 PHP 的性能（提高了 5 倍甚至 10 倍），并首次被正式的 Web 应用程序和站点所使用。我们可以说，今天 PHP 的成果远远超出了任何人在 PHP 项目诞生时的期望。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	PHP 的蓬勃发展增加了改善性能的欲望。幸运的是， Zend Engine 中设计的模型为持续优化性能提供了良好的基础。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	虽然 PHP 5.0 没有带来实质性的性能提升，并且在某些情况下甚至比 PHP4 更慢，一个由 Dmitry Stogov 领导的团队在社区的大力帮助下已经在后续版本中不断优化语言，在 PHP 5.6 发布的时候，在大多数情况下，性能提升在 1.5x 和 3x 之间。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	2015 年 12 月， PHP 7.0 取得了重大突破。 2016 年 12 月，7.1 版本也带来了一系列增强功能。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:normal;font-size:1.5em;font-family:&amp;quot;vertical-align:baseline;color:#111111;background-color:#FFFFFF;&quot;&gt;\r\n	PHP 8 性能展望\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	这是一个前途光明的版本，目前正在开发当中，由 Zend 的 Dmitry Stogov 主导。虽然它是基于 PHP 7.1 版本基础，但实际版本号尚未定义，所以本文称这个版本为“试验 JIT”分支下。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	关键功能 JIT（Just-In-Time）编译，是一种将代码转换为另一种字节码（比如运行它的机器 CPU 的本地代码）的技术。 JIT 可以使程序运行更快。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	本文涵盖了几个基准测试的结果，从 PHP 5 的第一个版本到 PHP 的试验性 JIT 分支版本，PHP 5 之前的版本性能本文不作介绍。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	在写这篇文章的时候，我们很难确定 PHP 8 之前是否会有另一个主要版本，比如 PHP 7.2。但是可以假设在 PHP 8 发布时，它已经包括当前试验版 JIT 分支的强大功能。\r\n&lt;/p&gt;\r\n&lt;h3 style=&quot;font-weight:normal;font-size:1.5em;font-family:&amp;quot;vertical-align:baseline;color:#111111;background-color:#FFFFFF;&quot;&gt;\r\n	PHP 性能评估\r\n&lt;/h3&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	本文只运行纯 CPU 任务脚本的基准测试（不需要I / O操作的任务例如访问文件，网络或数据库连接）。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	使用的基准测试脚本如下所示：\r\n&lt;/p&gt;\r\n&lt;pre class=&quot;sh_bash&quot;&gt;\r\n&lt;ol style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n	\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		bench.php  可在PHP源代码的 php-src/Zend 目录\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		micro_bench.php 也可以在 PHP 源代码发布的 php-src/Zend 目录中找到\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		mandelbrot.php  https://gist.githubusercontent.com/dstogov/12323ad13d3240aee8f1/raw/37fed3beb7e666b70e199bcf361af541b3c30d2d/b.php\r\n	&lt;/li&gt;\r\n\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	基准脚本仅使用每个PHP主要版本的最新小版本运行。因此，测试的版本如下：\r\n&lt;/p&gt;\r\n&lt;pre class=&quot;sh_bash&quot;&gt;\r\n&lt;ol style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n	\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.0.5\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.1.6\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.2.17\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.3.29\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.4.45\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.5.38\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		5.6.28\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		7.0.13\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		7.1.0\r\n	&lt;/li&gt;\r\n\r\n	&lt;li style=&quot;font-weight:inherit;font-style:inherit;font-family:inherit;vertical-align:baseline;&quot;&gt;\r\n		PHP-JIT(JIT实验分支)\r\n	&lt;/li&gt;\r\n\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	当然，我想确定，我们在相同的基准上运行所有小版本，例如在 5.3.0 到 5.3.29 之间。结果是有说服力的：性能方面的主要增强不是由小版本带来的，而是主要版本号的变化，例如从 PHP 5.4 到 PHP 5.5，或从PHP 5.6 到 PHP 7。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	小版本没有显示任何明显的性能改进。这意味着相同的脚本应该以相同的速度运行，无论您使用 PHP 5.4.0 还是 PHP 5.4.45。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;font-family:&amp;quot;vertical-align:baseline;text-indent:1em;color:#222222;background-color:#FFFFFF;&quot;&gt;\r\n	您可以查看基准进程部分，详细说明主机系统的设置，各个基准的运行方式以及如何解释时序结果。\r\n&lt;/p&gt;\r\n&lt;br /&gt;','PHP的性能演进(从PHP5.0到PHP7.1的性能全评测)','/Public/uploads/2018-04-10/u=2359550423,1794059142&fm=27&gp=0.jpg',17,1505371553,0,0,0),(9,6,'ruanyifeng','45岁以后的人生','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2017年初，网上&lt;a href=&quot;http://finance.sina.com.cn/chanjing/cyxw/2017-03-16/doc-ifycnikk0820270.shtml&quot; target=&quot;_blank&quot;&gt;流传&lt;/a&gt;华为公司正在清理34岁以上的员工。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;中国区开始集中清理34+的交付员工，......去向是跟海外服务部门交换今年新毕业的校招员工，也就是进新人，出旧人。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		这些旧人目测要被输出去海外，实际上就是变相裁员，这些30多岁的老杆子，英语又不好，拖家带口，能出去海外安心奋斗的没几个，即使出去了幸存的也不多。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061901.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	华为公司&lt;a href=&quot;http://tech.sina.com.cn/t/2017-02-14/doc-ifyameqr7511803.shtml&quot; target=&quot;_blank&quot;&gt;否认&lt;/a&gt;该消息。但是，不久以后又传出了一个&lt;a href=&quot;http://people.pedaily.cn/201611/20161121405632.shtml&quot; target=&quot;_blank&quot;&gt;消息&lt;/a&gt;，华为规定45岁必须退休。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;为保持公司年轻化，退休政策即将微调，从&quot;45岁可以退休&quot;改变为&quot;45岁须退休&quot;，想继续工作的，需人力资源部重新审批。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061904.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一时间，网上议论纷纷：34岁清理一批，45岁强制离职，这是什么样的人事政策啊！\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我不讨论这个消息的真假，因为我也不知道。&lt;span style=&quot;font-weight:800;&quot;&gt;我只指出一个事实：IT 行业是一个年轻人的行业。&lt;/span&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	随便哪一家 IT 公司，你去参观，主要员工都是年轻人，40岁以上的很少见，高管往往也是20几岁的年轻人。长久以来，一直有人&lt;a href=&quot;https://www.baidu.com/s?wd=40%E5%B2%81%E4%BB%A5%E4%B8%8A%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%8E%BB%E5%93%AA%E9%87%8C%E4%BA%86%3F&amp;amp;rsv_spt=1&amp;amp;rsv_iqid=0xa3920a67000003df&amp;amp;issp=1&amp;amp;f=8&amp;amp;rsv_bp=0&amp;amp;rsv_idx=2&amp;amp;ie=utf-8&amp;amp;tn=baiduhome_pg&amp;amp;rsv_enter=1&amp;amp;rsv_n=2&amp;amp;rsv_sug3=1&quot; target=&quot;_blank&quot;&gt;问&lt;/a&gt;：&quot;40岁以上的程序员都去哪里了？&quot;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	老员工在这个行业是稀有动物，从35岁开始，数量急剧减少，年龄越大越稀有。华为的传闻只是从一个侧面，验证了大家的这种感觉。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	为什么 IT 公司都是年轻人的天下？我认为主要原因有两个。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	首先，工作强度太大了。IT 公司的加班是家常便饭，业务越忙、加班时间越长。很多团队都采用&quot;996&quot;工作制：早上9点上班，晚上9点下班，每周六天。杭州有一家全世界最著名的电子商务公司，天天半夜12点，办公楼灯火通明，门口等着接生意的出租车排成一长队。有一项统计&lt;a href=&quot;https://www.ithome.com/html/it/287990.htm&quot; target=&quot;_blank&quot;&gt;《2016年 IT 公司加班时间排行榜》&lt;/a&gt;，华为排在第一位，平均每个工作日加班3.96小时，第二位是腾讯，加班3.92小时。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061902.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	人的生理和智能的最高峰是20岁～30岁这个年龄段。过了30岁，身体就慢慢走下坡路了，思维也不如以前活跃了。年轻的时候，长年累月的加班或许还可以承受，等进入中年，再这样拼，你的身体吃得消吗？加班好比折旧，加班越凶，折旧越快。我见过很多程序员刚过30岁，但看上去好像40岁，长期的缺乏运动和工作压力，使得他们的身体有着各种疾病，实际上已经不能承担高强度的工作，或者 deadline（截止期）的赶工压力了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	另一方面，即使你可以咬紧牙关撑下去，家里人答应吗？父母和妻儿天天看不到你，她们能受得了？万一父母住院，或者小孩在幼儿园被其他同学打了，你能不闻不问，继续全部心思扑在工作上？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	4、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	IT 公司缺少老员工的第二个原因是，这个行业变化太快了，老员工没优势。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	老员工的优势是经验和人脉，可是在 IT 行业，这两样东西都不是特别重要，新事物层出不穷，旧事物没多久就无人问津。最近的行业热点：共享单车、直播、VR、区块链、O2O......都是新事物，史无前例，大家都没经验。谁占领了市场，谁就成了标准。而且，新事物的市场往往主要是青年，他们接受新事物的程度最快最高，用&quot;90后&quot;去设计产品、打开市场，可能比使用&quot;70后&quot;有效得多。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这个行业里面，起决定性作用的是新技术。技术进步的速度，比市场的变化还快，每年都有大量新技术出来。你22岁大学毕业入职，等到10年过去了，32岁时你大学里面学到的东西都没用了，你必须和新人一样从头开始学习新技术。你也许会说，怎么可能都没用呢，难道微积分、统计学、编程原理这些都没用了吗？问题是新人也学过这些啊，而且他们刚刚学，不像你已经忘得差不多了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	企业发现，新人可以全身心投入工作，连续加班，可塑性高，又比较听话，不像老员工，资格太老而变得油滑，一有不满就到处抱怨，或者上班时间经常到吸烟区吞云吐雾。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	更糟糕的是，老员工的工资比新员工高得多。如果老员工没有能力优势，反而拿着比新人高几倍的工资，对企业来说，应该怎么做，就不言自明了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	中国的 IT 企业里面，第一线员工干到34岁时，大概已经拼搏了10年以上，再拼命有点力不从心了。对企业来说，该员工最能创造价值的巅峰也已经过去了。等他到了45岁，如果还没有当上高管，很可能已经创造不了价值了，再留着他反而可能有负作用，让企业变成松松跨跨的养老院。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这就是为什么大家觉得华为的传闻可信，因为符合逻辑。如果员工都是&lt;a href=&quot;http://baike.baidu.com/item/%E5%A5%8B%E6%96%97%E8%80%85%E5%8D%8F%E8%AE%AE&quot; target=&quot;_blank&quot;&gt;&quot;奋斗者&quot;&lt;/a&gt;，你说谁更容易有奋斗精神，25岁还是45岁？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	好在 IT 行业的&lt;a href=&quot;http://cj.sina.com.cn/article/detail/2381596945/205351&quot; target=&quot;_blank&quot;&gt;工资&lt;/a&gt;现在还是不错的，即使45岁退休了，生活水平也不会一时下降太多。如果能够拿到公司的股票，而公司又非常成功（比如华为），那么可能不用等到45岁，你自己早早就走了，享受生活不再为人打工了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061903.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	马云在湖畔大学对企业家&lt;a href=&quot;https://tech.sina.cn/i/gn/2017-03-27/detail-ifycstww1349717.d.html&quot; target=&quot;_blank&quot;&gt;上课&lt;/a&gt;，第一课就说： &quot;&lt;span style=&quot;font-weight:800;&quot;&gt;小公司的成败在于你聘请什么样的人，大公司的成败在于你开除什么样的人。大公司里有很多老白兔，不干活，并且慢慢会传染更多的人。&lt;/span&gt;&quot;可见最成功的企业家早就认可这种做法。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	6、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我估计，34岁之前晋升到中级，45岁之前晋升到高管，否则强制退休，会成为 IT 行业的惯例。随着其他行业正在日益变成&quot;互联网 +&quot;，这种做法还有向其他行业扩展的可能。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这就提出了一个很严峻的问题。如果你没有在期限之前晋升到中级或高管，那么到45岁就没工作了，你该怎么办？45岁还是一个很有活力的年龄，就这样退休，对社会是人力资源浪费，对个人也很残酷。可是，那时你找得到工作吗？或者即使找到工作，你还能拿到原来岗位的那种报酬吗？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	现实是非常残酷的。一个名叫&quot;蓝血研究&quot;的公号里面，贴出过一篇据说是华为被裁员工的&lt;a href=&quot;http://view.inews.qq.com/a/20170222A00W2R00&quot; target=&quot;_blank&quot;&gt;文章&lt;/a&gt;。首先，作者表示理解华为的做法。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;年龄大，股票多的员工消耗了华为大量的成本，公司要清理这样的员工为年轻世代释放出更大的空间，这是极其合理的事情。而且大部分的老员工基本已经财务自由，就算没有完全自由，保留的股票也基本可以衣食无忧。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	但是，现实情况却是&quot;强制退休或者不续约的，都不是年龄大和股票多的高成本员工，反而是在华为兢兢业业十来年，考评普通职级一般，收入和股票都偏低的那一群人&quot;。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	作者认为很多高职级的管理者更应该被裁掉。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;高管真的是那么不可或缺吗？我真心不觉得是这样，很多情况下恰恰相反。当前很多高管其实离业务很远，让他们去做一件基层员工的事情，他们反而是做不了的，自己也没有做什么高大上的战略性的事情，每天就是开会开会开会，分配任务。大部分都貌似很忙，每天都开会到很晚，但是真的对业务有多大帮助呢？大家心里都有一杆秤！一边是我们的基层大龄扎实贡献的员工被裁被退休，一边是管理者的岗位职级嗖地往上涨，公平何在？公理何在？&quot;\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;一个19级的管理者的年收入大概是他所管理的15级员工的5倍，但是19级的贡献度真的是15级的5倍吗？以现在的体制，把15级的人扔到19级的岗位上，该部门会出大乱子吗？业务就会因此出现毁灭性打击吗？还是说15级经过几个月适应，竟然也能干19级的岗位。到底是谁 overpay, 到底是谁应该被退休？&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	7、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我觉得，每个人都应该想一想，你的雇主如果没有你，是不是就会有重大损失？一个新人或更基层的员工接手你的岗位，他/她能不能上手，而他们要求的报酬又会是多少？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	技术的进步让人类活得更长更健康，但也让我们变得不那么&lt;a href=&quot;http://www.ruanyifeng.com/blog/2016/08/useless-people.html&quot; target=&quot;_blank&quot;&gt;有用&lt;/a&gt;了。将来也许每个人都要选择两次自己的人生：一次是大学毕业找工作时，另一次是45岁没有工作时。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（说明：本文选自我正在写的新书《未来世界的幸存者》，点击&lt;a href=&quot;https://ruanyf.github.io/survivor/&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;免费阅读全书。）\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（正文完）\r\n&lt;/p&gt;\r\n&lt;br /&gt;','\r\n2017年初，网上流传华为公司正在清理34岁以上的员工。','/Public/uploads/2018-04-10/u=3434835309,625095034&fm=27&gp=0.jpg',15,1505371826,0,0,0),(10,4,'ruanyifeng','穷忙的人生','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	香港曾经有一档电视真人秀，叫做&lt;a href=&quot;https://baike.baidu.com/item/%E7%A9%B7%E5%AF%8C%E7%BF%81%E5%A4%A7%E4%BD%9C%E6%88%98&quot; target=&quot;_blank&quot;&gt;《穷富翁大作战》&lt;/a&gt;，专门邀请富人体验穷人的生活。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071601.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	有一期节目的主人公是&lt;a href=&quot;http://baike.baidu.com/item/%E7%94%B0%E5%8C%97%E8%BE%B0&quot; target=&quot;_blank&quot;&gt;田北辰&lt;/a&gt;。他的父亲田元灏是香港纺织界的头面人物，人称&quot;一代裤王&quot;。他本科毕业于康奈尔大学电子工程专业，又去读了哈佛大学 MBA，回到香港后创办了服装品牌 G2000 和 U2，是那种很努力的&quot;富二代&quot;。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071602.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	他崇尚自由竞争和人生奋斗，座右铭是&quot;如果你今天对自己满意，明天就会被淘汰&quot;，一直宣扬 &quot;如果你有斗志，弱者也可以变成强者。&quot;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071603.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	但是，参加了这次电视节目以后，他的观点发生了180度转变，对着电视镜头公开说：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;这个社会在极严厉地惩罚，那些没条件读书的人。穷人一輩子都不可能变有钱人。在強弱悬殊的情况下，只有弱者越弱，越來越慘！&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071604.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	田北辰为什么改变观点，认为穷人不可能翻身呢？原来，节目组请他&lt;a href=&quot;http://cj.sina.com.cn/article/detail/2381596945/91594?column=china&amp;amp;ch=9&quot; target=&quot;_blank&quot;&gt;体验&lt;/a&gt;了两天清洁工的生活，薪资是每小时25港币，每天的生活费只有50港币，住在只有1.6平方米的&quot;笼屋&quot;，月租1350港币。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	所谓&quot;笼屋&quot;，外面看着像衣橱，门一拉开，里面只能放下一张床，关上门四面全挨着木板墙，东西都挂在墙上。就是这种条件，房产中介还称它为&quot;豪华笼屋&quot;，因为还有600港币的更低档，就是在马桶上放一块木板睡人。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071605.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071606.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上班时间是早上五点，地铁头班车还没开，只能坐夜宵巴士，车费是13港币，田北辰惊呼：&quot;每天生活费只有50港币，这怎么坐得起！&quot;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071607.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	开始工作后，好不容易熬到中午吃饭，但只有15元的预算，大部分的饭要20元，他最后只能坐在街边的楼梯上，就着白开水嚼干粮。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071608.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071609.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	吃完了，还要抓紧时间躺在花坛上休息一会。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071610.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	做满9个小时，就可以下班了。但是，真正的清洁工为了养家户口，还要去做夜班，一天在外近17个小时，只能睡5、6个小时。田北辰说，因为只有两天，自己才有斗志坚持下去，如果要做一个月，甚至半年，那就太绝望了！\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;没有学历、技术的人，为了活下去，不是住笼屋就是要工作到半夜，对于他们，最重要事情是下一顿吃什么，怎么会有时间和精力去思考未来怎么发展？来来去去都在死胡同！&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071611.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	每天忙于工作，干到累死，但还是很穷，只能租屋住，没有自己的积蓄，一旦停止工作或者生病在床，生活来源顿时就成问题。田北辰体验的这种人生，社会学家早就注意到了，起名为&quot;穷忙族&quot;，百度百科的&lt;a href=&quot;http://baike.baidu.com/item/%E7%A9%B7%E5%BF%99%E6%97%8F/1407708&quot; target=&quot;_blank&quot;&gt;定义&lt;/a&gt;如下。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;穷忙族是指那些薪水不多，整日奔波劳动，却始终无法摆脱贫穷的人。最早出现于上世纪90年代的美国，指拼命工作仍然无法摆脱最低水准生活的人们。日本经济学家门仓贵史在《穷忙族》一书中，他对&quot;穷忙族&quot;下的定义是：每天繁忙地工作却依然不能过上富裕生活的人。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071614.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	不仅香港有&quot;穷忙族&quot;，内地也越来越多。举例来说，根据&lt;a href=&quot;http://news.sina.com.cn/o/2017-04-09/doc-ifyecfnu7833937.shtml&quot; target=&quot;_blank&quot;&gt;报道&lt;/a&gt;，2016年上海送外卖最多的送餐员，是一位叫做何文妹的中年女性，至少送出了12214单。即使全年无休，每天平均也要33单，从午饭时间一直送到深夜，一刻不停。电瓶车的电瓶，一天要准备6组。车上插着两个手机，一个导航，一个接单。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071612.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这种强度的劳动，每年能有多少收入呢？每单的送餐费是8元，这就是说，何文妹一年的送餐总收入在10万元左右。扣除电瓶费、车辆维护费、通信费等等以后，净收入大概还能剩下8万多元。这是&quot;送餐王&quot;的收入水平，大部分送餐员的收入，应该远不如她，可能只有一半左右。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上海的底层劳动者，收入基本就是这种水平。他们还要用这些钱支付房租。每天下班回到家，累得就想睡觉，睁开眼就要去上班，日复一日，人生的出路在哪里？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071613.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	4、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	将来的&quot;穷忙族&quot;，不仅是低技能的底层劳动者，还将包括很多受过高等教育、写字楼工作的白领。年轻人如果没有家庭支持，想要靠自己的努力出人头地，会变得越来越难。因为单靠工资收入，已经不足以积累财富了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071615.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	有一项&lt;a href=&quot;https://c.m.163.com/news/a/CH66B8Q700018M4D.html?spss=newsapp&amp;amp;spsw=1&quot; target=&quot;_blank&quot;&gt;统计&lt;/a&gt;说：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;1993年属于低等收入者的城里人，到了1995年有43%都能向上爬。而相比之下，2011年属于低等收入者的城里人，到了2013年只有20%摘掉最底层的帽子。一个不恰当的比喻，如果上世纪90年代算是城市穷人的黄金时代的话，那今天这种好日子已经结束了。&quot;\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;一方面，城里穷人越来越难走出贫困；另一方面，城里富人的位置也坐得越来越稳。1993-1995年，城里的高等收入者有64%的概率能一直当富人。而到了2011-2013年，高等收入者竟然有84%的概率能保证自己不被从富人列表中除名。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面的数字就是说，如果你是穷人，80%的概率以后你还是穷人；如果你是富人，84%的概率是以后你还是富人。一个台湾人&lt;a href=&quot;http://mapleduh.pixnet.net/blog/post/47158492&quot; target=&quot;_blank&quot;&gt;感叹&lt;/a&gt;说：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;那种奴隶化的生活（长时间工作，却仅能勉强满足温饱）才是历史的常态。过去三十年社会阶层的大幅流动，是历史的不正常，现在开始回归常态。99%的我们，都面临着这种大趋势的吞噬：你的工资不变，但房价和物价却是越来越高，于是你必需花更多时间来挣钱，甚至一天做二份工，最后成为没有自己时间的奴隶。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	总的来看，下一代青年不太可能有上一代那么多机会。经济增长率已经开始放缓，还将继续放缓，人口增长高峰已经过去，老龄化越来越严重，老人的消费远不及年轻人。矿业、制造业、零售业、证券业......除了高科技，几乎所有行业都不会有以前那么高的增长率。上一代人赶上了中国经济起飞，还拥有依靠房地产翻身的机会，但是下一代人不会再有这样的机会。你现在买入一套房子，十年后价值翻上十倍，完全是零可能。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	越来越多的人将会发现，即使从小就努力学习，从很好的学校毕业，后来努力工作，但迎接他们的将是&quot;长久的低薪、难升迁的职场、高昂的物价、买不起的房子......&quot;。尽管你很努力，待人友善，有公德心，但就是挣不到钱，只能在社会的底层挣扎。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2015年，社会工作者藤田孝典调查日本的老人问题。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	他&lt;a href=&quot;http://www.cup.com.hk/2017/06/26/the-poor-elderly-in-japan/&quot; target=&quot;_blank&quot;&gt;发现&lt;/a&gt;，很多老人年轻时都拿过中产阶级的薪水（400万日元），但是现在已经沦落到社会的底层，过着非常困苦的生活。&quot;七老八十还要在大热天当廉价劳工，因经济拮据而妻离子散，唯有独居烂屋，孤零零度过晚年。&quot;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	藤田孝典将这些老人称为&quot;下流老人&quot;（底层老人）。他称，日本的下流老人以后可能会达到1亿人。要知道，日本现在的总人口也只有1.27亿。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071616.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下流老人有三大特征。（1）收入极低，即使政府提供补助费，也难以维持健康饮食，以及一般家庭应有的生活；（2）存款不足，老人必须提心吊胆地过活，一旦碰到突发事故或慢性病，日常已经捉襟见肘的生活，就会面临崩溃危险；（3）老无所依，子女连自己都养不起，更遑论赡养老人。日本不少老人因家庭破碎而长期独居，平日缺乏与亲朋邻里的交流，关系疏离，一旦发生意外无人照应。在晚年失去可以依靠的人，是下流老人最悲苦的特征。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071617.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下流老人的根源就是，钱花光了，人还没死。日本媒体还发明了一个词&quot;老后破产&quot;，这就是长寿的恶梦。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071618.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	现代科技如此发达，人的寿命越来越长，可是工作又积累不了财富，于是，&quot;清贫青年，流沙中年，下流老人&quot;就成了大多数人必然的命运归宿。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（说明：本文选自我正在写的新书《未来世界的幸存者》，点击&lt;a href=&quot;http://survivor.ruanyifeng.com/&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;免费阅读全书。）\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（正文完）\r\n&lt;/p&gt;\r\n&lt;br /&gt;','香港曾经有一档电视真人秀，叫做《穷富翁大作战》，专门邀请富人体验穷人的生活。','/Public/uploads/2018-04-10/5accb9f87433a.jpg',14,1505371944,0,0,0),(11,4,'ruanyifeng','如何验证 Email 地址：SMTP 协议入门教程','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	Email 是最常用的用户识别手段。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	开发者常常需要验证邮箱的真实性。一般的方法是，注册时向该邮箱发出一封验证邮件，要求用户点击邮件里面的链接。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062501.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	但是很多时候（比如要搞邮件营销时），拿到的是成千上万现成的 Email 地址，不可能通过回复确认真实性，这时该怎么办呢？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	答案就是使用&amp;nbsp;&lt;a href=&quot;http://baike.baidu.com/item/SMTP/175887?fromtitle=SMTP%E5%8D%8F%E8%AE%AE&amp;amp;fromid=421587&quot; target=&quot;_blank&quot;&gt;SMTP 协议&lt;/a&gt;。本文将介绍如何通过该协议验证邮箱的真假。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062502.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	另外，结尾处还有一则移动端 H5 开发的&lt;a href=&quot;http://www.ruanyifeng.com/blog/2017/06/smtp-protocol.html#support&quot;&gt;培训消息&lt;/a&gt;，欢迎关注。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一、SMTP 协议简介\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	SMTP 是&quot;简单邮件传输协议&quot;（Simple Mail Transfer Protocol）的缩写，基于 TCP 协议，用来发送电子邮件。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	只要运行了该协议的服务器端（daemon），当前服务器就变为邮件服务器，可以接收电子邮件。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	验证 Email 邮箱的基本思路如下。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ol&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			找到邮箱所在域名的 SMTP 服务器\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			连接该服务器\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			询问有没有该邮箱\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			如果服务器返回 250 或 251 状态码，邮箱就是真的；如果返回 5xx（500～599），就是假的。\r\n		&lt;/li&gt;\r\n	&lt;/ol&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	注意，即使服务器确认邮箱是真的， 也不代表邮件一定会发送到该邮箱，更不代表用户一定会读到该邮件。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	二、查找域名的 MX 记录\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	下面通过一个例子，演示如何验证test@gmail.com这个邮箱。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	首先，需要查找gmail.com&amp;nbsp;的 MX 记录。它指向真正处理邮件的那台服务器。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ nslookup &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	输入nslookup命令后，会提示一个大于号，表示等待用户进一步输入。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;set&lt;/span&gt; q&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;mx &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; gmail&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码中，set q=mx设定查询的是 MX 记录，第二行输入要查找的域名，结果返回了5条 MX 记录。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;Server&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1.1&lt;/span&gt; Address&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1.1&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt;#53 &lt;/span&gt; Non&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;authoritative answer&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt; gmail&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com   mail exchanger &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;20&lt;/span&gt; alt2&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; gmail&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com   mail exchanger &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;30&lt;/span&gt; alt3&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; gmail&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com   mail exchanger &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;10&lt;/span&gt; alt1&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; gmail&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com   mail exchanger &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt; gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; gmail&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com   mail exchanger &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;40&lt;/span&gt; alt4&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	gmail.com是很大的邮件服务商，所以会有多条记录，一般的域名只有一条。如果这一步查不到 MX 记录，该邮箱肯定是假的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	除了自己执行nslookup，也可以使用线上服务（&lt;a href=&quot;https://mxtoolbox.com/&quot; target=&quot;_blank&quot;&gt;1&lt;/a&gt;，&lt;a href=&quot;http://www.nmonitoring.com/show-mx-record.html&quot; target=&quot;_blank&quot;&gt;2&lt;/a&gt;，&lt;a href=&quot;http://www.dnsqueries.com/en/mx-lookup.php&quot; target=&quot;_blank&quot;&gt;3&lt;/a&gt;）。更多 DNS 的介绍，请参考&lt;a href=&quot;http://www.ruanyifeng.com/blog/2016/06/dns.html&quot; target=&quot;_blank&quot;&gt;《DNS 原理入门》&lt;/a&gt;。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	三、建立 TCP 连接\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	知道了邮件服务器的地址，就可以与它建立&amp;nbsp;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html&quot; target=&quot;_blank&quot;&gt;TCP&lt;/a&gt;&amp;nbsp;连接了。SMTP 协议的默认端口是25。使用 Telnet 或 Netcat 命令，都可以连接该端口。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;$ telnet gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;token comment&quot; style=&quot;color:slategray;&quot;&gt;# 或者 &lt;/span&gt;$ nc gmail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;smtp&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;25&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	服务器返回220状态码，就表示连接成功。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;220&lt;/span&gt; mx&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com ESMTP f14si7006176pln&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;.607&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; gsmtp&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	接下来，就可以使用 SMTP 协议的各种命令与邮件服务器交互了。\r\n&lt;/p&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	四、HELO 命令和 EHLO 命令\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	SMTP 协议规定，连接成功后，必须向邮件服务器提供连接的域名，也就是邮件将从哪台服务器发来。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	假定从mail@example.com向test@gmail.com发送邮件，这里要提供的域名就是example.com。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;HELO exampl&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	邮件服务器返回状态码250，表示响应成功。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt; mx&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com at your service&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	不过，HELO命令现在比较少用，一般都使用EHLO命令。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;EHLO example&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	邮件服务器收到EHLO命令以后，不仅会返回250状态码，还会返回自己支持的各种扩展的列表。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;mx&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com at your service&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;114.84&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;160.153&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;SIZE &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;157286400&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;8BITMIME &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;STARTTLS &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;ENHANCEDSTATUSCODES &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;PIPELINING &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;CHUNKING &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt; SMTPUTF8&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	五、MAIL FROM 命令\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	然后，连接者要使用MAIL FROM命令，向邮件服务器提供邮件的来源邮箱。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;MAIL FROM&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;a class=&quot;token email-link&quot; href=&quot;mailto:mail@example&quot;&gt;mail@example&lt;/a&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	上面代码表示，连接者将从mail@example.com向邮件服务器发送邮件。邮件服务器返回250状态码，表示响应成功。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt; OK h10si3194349otb&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;.59&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; gsmtp&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	SMTP 是一个很简单的协议，本身没有规定如何验证邮件的来源，也就是说，不验证邮件是否真的从mail@example.com发来，所以导致了后来垃圾邮件泛滥。为了控制垃圾邮件，许多邮件服务器会用自己的方法验证邮件地址，下面就是其中的一些方法。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			example.com 是否有 MX 记录\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			example.com 是否可以 Ping 通\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			是否存在 postmaster@example.com 这个邮箱\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			发起连接的 IP 地址是否在黑名单之中\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			IP 地址的反向 DNS 解析，是否指向一个邮件服务器\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	六、RCPT TO 命令\r\n&lt;/h2&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	最后一步就是使用RCPT TO命令，验证邮件地址是否存在。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;RCPT TO&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;a class=&quot;token email-link&quot; href=&quot;mailto:test@gmail&quot;&gt;test@gmail&lt;/a&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; &lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	邮件服务器返回了550状态码，表示该 Email 地址不存在。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;550&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt; The email account that you tried to reach does not exist&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; Please try &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;550&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt; double&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;checking the recipient\'s email address &lt;span class=&quot;token keyword&quot; style=&quot;color:#0077AA;&quot;&gt;for&lt;/span&gt; typos or &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;550&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt; unnecessary spaces&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt; Learn more at &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;550&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;1&lt;/span&gt; https&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;support&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;mail&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;?&lt;/span&gt;p&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;=&lt;/span&gt;NoSuchUser p34si3372771otp&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;.228&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; gsmtp&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	如果查询的是一个真实的 Email 地址，邮件服务器就会返回250状态码。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;RCPT TO&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;yifeng&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;a class=&quot;token email-link&quot; href=&quot;mailto:ruan@gmail&quot;&gt;ruan@gmail&lt;/a&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;250&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;5&lt;/span&gt; OK p34si3372771otp&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;.228&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; gsmtp&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	一般来说，状态码 250 和 251 都表示邮箱存在，状态码 5xx 表示不存在，其他状态码（主要是 4xx）则代表无法确认。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;RCPT TO&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;lt;&lt;/span&gt;&lt;a class=&quot;token email-link&quot; href=&quot;mailto:xxx@censored&quot;&gt;xxx@censored&lt;/a&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;pl&lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;451&lt;/span&gt; Temporary local problem &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; please try later&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	验证完成后，使用QUIT命令关闭 TCP 连接。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n&lt;pre class=&quot; language-bash&quot;&gt;QUIT &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;221&lt;/span&gt; &lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:#999999;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;0&lt;/span&gt; closing connection p34si3372771otp&lt;span class=&quot;token number&quot; style=&quot;color:#990055;&quot;&gt;.228&lt;/span&gt; &lt;span class=&quot;token operator&quot; style=&quot;color:#A67F59;background:rgba(255, 255, 255, 0.498);&quot;&gt;-&lt;/span&gt; gsmtp&lt;/pre&gt;\r\n&lt;/blockquote&gt;\r\n&lt;h2 style=&quot;font-weight:500;font-size:2.88em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	七、参考链接\r\n&lt;/h2&gt;\r\n&lt;ul style=&quot;color:#111111;font-family:Georgia, serif;font-size:10px;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;http://blog.online-domain-tools.com/2014/11/14/how-to-verify-email-address/&quot; target=&quot;_blank&quot;&gt;How to Verify Email Address&lt;/a&gt;\r\n	&lt;/li&gt;\r\n	&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n		&lt;a href=&quot;https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol&quot; target=&quot;_blank&quot;&gt;Simple Mail Transfer Protocol&lt;/a&gt;\r\n	&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（正文完）\r\n&lt;/p&gt;\r\n&lt;br /&gt;','如何验证 Email 地址：SMTP 协议入门教程','/Public/uploads/2018-04-10/u=64259775,1071357643&fm=27&gp=0.jpg',47,1505372093,0,0,0),(12,5,'ruanyifeng','技术决定历史','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	大学时期，我的专业是世界经济。那个专业需要学习《经济史》，了解古代的人们怎么挣钱和花钱。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	《经济史》的课程很&lt;a href=&quot;http://www.ruanyifeng.com/blog/2010/07/interesting_economic_history.html&quot; target=&quot;_blank&quot;&gt;有趣&lt;/a&gt;，读完以后，看待历史的眼光会不一样。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052101.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	以前，我觉得政治最重要，决定了历史的变迁。学了《经济史》，我认识到，经济比政治更重要。政治人物只是舞台上的演员，剧情走向早由经济因素决定了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	举例来说，美国南北战争的根本原因就是经济。北方发展制造业，缺乏雇工，迫切希望南方种植园释放黑奴，让他们到工厂里面当工人。南方庄园主坚决不同意，一旦奴隶制度消失了，谁会愿意忍受烈日高温，到地里采棉花？如果棉花种植成本大幅上涨，就无法向欧洲出口，庄园主就会破产。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052102.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	再比如，大明王朝的灭亡原因也是经济。历史学家黄仁宇&lt;a href=&quot;https://book.douban.com/review/5700560/&quot; target=&quot;_blank&quot;&gt;指出&lt;/a&gt;，明朝财政非常困难，根本无力抵抗各种入侵。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;在黄仁宇看来，明朝十六世纪的财税困境，在于低下的税收管理水平无法适应其极度复杂的税收结构，导致了财政系统全国范围内的混乱局面。而&quot;奉行成例&quot;的僵化思维又使任何有效的改革无法实行，从而使政府税收长期不足，公共行政能力十分低下，无法有效地行使政府职能，最终导致灾难性的后果。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	3、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	很长一段日子，我都持有这种&quot;经济决定论&quot;，进而沉迷于证券市场，相信&quot;股市是经济的晴雨表&quot;。就这样，浪费了很多时间。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	后来，全球金融危机爆发，各国纷纷出台刺激经济的政策。这件事让我很困惑：经济学已经有几百年的历史，早就成了一门&quot;科学&quot;，但是为什么没能防止（甚至都没预测到）这么大规模的经济危机呢？\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	危机爆发之后，经济学家还在争论不休，回答不了几个最基本的问题：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;ul&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			危机会持续多久？\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			如何解决危机？\r\n		&lt;/li&gt;\r\n		&lt;li style=&quot;text-align:left;font-size:1.6em;&quot;&gt;\r\n			类似的危机将来会不会再发生？\r\n		&lt;/li&gt;\r\n	&lt;/ul&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我对经济学的信心，就是从那个时候开始动摇和崩溃的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	4、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	在学校期间，我学会了制作网页，架设了个人网站。离开学校以后，更是亲身感受到了，互联网技术对整个社会和个人命运的巨大改变。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	对我来说，技术变得比经济学更有吸引力了。渐渐地，我不再阅读经济学书籍了，转而大量阅读技术书籍。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	熟悉科技史以后，我看待历史的观点，再一次发生了巨大的变化。我现在认为，主导历史的因素，短期（一年到几年）是政治，中期（几年到几十年）是经济，长期（几十年到几百年）则是技术。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span style=&quot;font-weight:800;&quot;&gt;长期来看，政治和经济都不太重要，影响不了趋势，真正起决定性作用的是技术。&lt;/span&gt;政治和经济只能改变资源的分配和价格，只有技术才能创造出新东西。政治和经济只能使人类在平面上移动，只有技术才能使得人类向上提升，进入下一个阶段。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	5、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我发现，人类的每一次大发展，都是技术推动的。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（1）石器时代，人类学会了&lt;span style=&quot;font-weight:800;&quot;&gt;加工石材&lt;/span&gt;，有了最基本的工具，可以定居生活了，进入了氏族社会。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（2）等到掌握了&lt;span style=&quot;font-weight:800;&quot;&gt;粮食生产技术&lt;/span&gt;，人类有了多余的粮食，氏族就分化出了阶层，产生了贵族和首领。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（3）铁器时代，人类掌握了&lt;span style=&quot;font-weight:800;&quot;&gt;冶炼技术&lt;/span&gt;，能生产更好的农具和武器，拥有铁器的氏族开始征服其他氏族，慢慢演变成封建王国。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（4）欧洲的封建时期有1000多年，中国有2000多年，为什么会延续这么长？就是因为这段时间，技术没有重大突破。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（5）等到欧洲人掌握了&lt;span style=&quot;font-weight:800;&quot;&gt;造纸术&lt;/span&gt;和&lt;span style=&quot;font-weight:800;&quot;&gt;印刷术&lt;/span&gt;，新思想第一次可以廉价地大规模传播（此前都是羊皮的手抄书，一般人看不到），黑暗的中世纪因此终结，文艺复兴开始，人类进入近代社会。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（6）&lt;span style=&quot;font-weight:800;&quot;&gt;火药&lt;/span&gt;的出现，使得骑兵和城堡变得毫无作用，一小股军队就会拥有巨大的杀伤力，诸侯林立的欧洲开始统一为一个个民族国家，现代意义上的政府出现了。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		（7）工业革命始于人类能够制造&lt;span style=&quot;font-weight:800;&quot;&gt;蒸汽机&lt;/span&gt;，生产力提升了一个数量级，要求大规模的社会分工和交换，由此诞生了资本主义制度，直到今天。\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	总之，重大的新技术一旦出现，政治制度和经济制度----不管主动或被动----最终都会为之重构，让这项技术的威力发挥到最大。这就是为什么技术是最终的决定因素，决定了人类社会的演变。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	6、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	今天，我们正身处最新一次、也是最大一次的技术革命：信息技术革命。技术进步的速度日新月异，而且还在加速，这就注定了目前的人类社会也会随之大变。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	很多我们习以为常的事情，都已经完全改变了。15年前，世界市值最大的前五大公司只有一家技术公司，今天已经全部是了。新技术创造了财富，财富也在流向技术。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052103.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	中国也是如此，2017年中国市值最大的公司，是香港上市的腾讯，第二名是美国上市的阿里巴巴。曾经的巨无霸----中国石油、工商银行、中国移动----都被挤到后面去了。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052204.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	时代已经变了，新人和新公司每天都在崛起，旧的公司和制度每天都在没落。技术正在加速重塑人类社会。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	7、\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052105.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	以色列学者尤瓦尔·赫拉利在《未来简史》一书中感叹：\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;现代科技已经让人类拥有了超过远古诸神的力量，我们的后代肯定将拥有神一样的创造力和毁灭力。\r\n	&lt;/p&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		我们并不知道眼前的道路会把我们引向何方，也不知道我们那些像神一般的后代会是什么样子。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	正如他所说，我们正身处在一个前人从未有过的处境：技术让人类这种渺小的生物，拥有了神一般的力量。这种力量会把我们带到哪里？完全不知道。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	我的心情很矛盾。一方面，对未来的新技术，我感到无比兴奋和期待，就像推特上面一位网友所说。\r\n&lt;/p&gt;\r\n&lt;blockquote style=&quot;color:#111111;background-color:#F5F2F0;font-family:Consolas, Monaco, &amp;quot;font-size:10px;&quot;&gt;\r\n	&lt;p style=&quot;margin-left:0.8em;font-size:1.6em;&quot;&gt;\r\n		&quot;一想到我的寿命只有几十年，我就感到特别难过。倒不是因为我害怕死亡，而是因为我将没有机会看到，未来一千年中各种新奇有趣的新技术。&quot;\r\n	&lt;/p&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	另一方面，我还有一种不好的预感。人类掌握的技术，已经强大到足以毁灭人类自身，在技术面前，普通人（大多数人都是普通人）已经&lt;a href=&quot;http://www.ruanyifeng.com/blog/2016/08/useless-people.html&quot; target=&quot;_blank&quot;&gt;没有多大用处&lt;/a&gt;了。人类的历史将会怎样改变？这不禁令人充满了在劫难逃的担忧。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（说明：本文选自我正在写的新书《未来世界的幸存者》，点击&lt;a href=&quot;https://ruanyf.github.io/survivor/&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;免费阅读全书。）\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	（完）\r\n&lt;/p&gt;\r\n&lt;br /&gt;','大学时期，我的专业是世界经济。那个专业需要学习《经济史》，了解古代的人们怎么挣钱和花钱。','/Public/uploads/2018-04-10/u=1892994939,2936373478&fm=27&gp=0.jpg',13,1505372707,0,0,0),(13,6,'ruanyifeng','1997年的三件事','&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span class=&quot;firstchar&quot;&gt;上&lt;/span&gt;个月，英国《卫报》发表一篇长篇文章&lt;a href=&quot;http://books.guardian.co.uk/departments/generalfiction/story/0,,2282065,00.html&quot; target=&quot;_blank&quot;&gt;《A thriller in ten chapters》&lt;/a&gt;，回顾了过去十年的英国文学出版业。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	作者是《观察家报》的文学编辑Robert McCrum。他在这个岗位上干了十年，即将离任，这篇文章总结了他所观察到的十年中的一些大事。（值得一提的是，他还是那本著名的&lt;a href=&quot;http://www.ruanyifeng.com/blog/2006/08/serial_notes_on_the_story_of_english.html&quot; target=&quot;_blank&quot;&gt;《英语的故事》&lt;/a&gt;的作者之一。）\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	他从1997年开始写起，这一年里有几件事，当时没有人注意，现在看来是有一些历史意义的。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span style=&quot;font-weight:800;&quot;&gt;第一件事&lt;/span&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img alt=&quot;bg2008061402.jpg&quot; src=&quot;http://www.ruanyifeng.com/blog/upload/2008/06/bg2008061402.jpg&quot; width=&quot;372&quot; height=&quot;192&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1997年，一个22岁的女孩Zadie Smith，从来没有出过书，居然有人付给她前所未有的25万英镑定金，购买她的第一部小说《White Teeth》。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这部小说一直拖延到2000年才出版。问世后，评论界恶评不断，但是最终这本书却取得了成功，在全世界范围已经售出了200万册。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这不是一个单一的事件，类似的出版商垂青新人的事件还有好几起，它们预示着一个重大的变化：那就是读者比以前更愿意接受新作家新作品。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	90年代初的时候，英国文坛最红的名字大概是拉什迪，可是十年之后却完全是另外一些名字。这些年布克奖（英国文学最高奖）的获奖者都是一些年纪不大的新人。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	随着信息时代一起到来的，是一个文学的新时代。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span style=&quot;font-weight:800;&quot;&gt;第二件事&lt;/span&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img alt=&quot;bg2008061403.gif&quot; src=&quot;http://www.ruanyifeng.com/blog/upload/2008/06/bg2008061403.gif&quot; width=&quot;361&quot; height=&quot;134&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1997年，网上书店Amazon进入了第三年。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	二年前，刚成立的时候，它简直就像一个小作坊，没有人真的把它当回事。但是到了1997年，它开始侵蚀传统书店的利润了，它的全年销售额是1600万美元，顾客总数是18万人。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	到了2007年，它的年销售额飙升到35.8亿美元，顾客遍及全球200个国家和地区。2007年12月10日，一天之内，它卖出了540万件商品。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;span style=&quot;font-weight:800;&quot;&gt;第三件事&lt;/span&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	&lt;img alt=&quot;bg2008061404.jpg&quot; src=&quot;http://www.ruanyifeng.com/blog/upload/2008/06/bg2008061404.jpg&quot; width=&quot;277&quot; height=&quot;320&quot; /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1997年，一个靠福利金救济的单身妈妈，在被拒绝了无数次后，终于将她的一部书稿推销了出去。书商只印了500册，并且建议作者不署全名，只署缩写，防止被人看出来是妇女的作品。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	这本书的名字叫做《哈利波特和魔法石》（Harry Potter and the Philosopher\'s Stone），这个单身妈妈的名字叫做Jk Rowling。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1998年，第二册《哈利波特和密室》出版，市场依然没有什么反响。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	1999年，第三册出版，一切开始发生变化。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	2000年，第四册《哈利波特和火焰杯》出版，书店门口开始有人排队购买，报纸上出现了大量的讨论文章。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	此后，这套书成为了一个世界性文化现象，几乎打破了世界出版史上的所有纪录。2007年，当最后一册《哈利波特和死圣》出版时，整套书已经累计卖出了4亿本，价值5.45亿英镑。\r\n&lt;/p&gt;\r\n&lt;p style=&quot;margin-left:0.8em;color:#111111;font-size:1.6em;font-family:Georgia, serif;background-color:#F5F5D5;&quot;&gt;\r\n	也许是巧合，哈利波特诞生的那一年，正是英国工党政府上台，托尼·布莱尔担任首相的第一年。哈利波特毕业的那一年，也是布莱尔结束十年任期、辞职下台的时候。\r\n&lt;/p&gt;\r\n&lt;br /&gt;','1997年的三件事','/Public/uploads/2018-04-10/u=2314225384,4223500759&fm=27&gp=0.jpg',65,1505372886,0,0,0),(14,4,'manyi','bbbb','ssssssssssss','ssssssss','/Public/uploads/2018-04-10/u=3299339945,786565105&fm=27&gp=0.jpg',10,1506062446,1506066598,0,1),(21,3,'a','adsf','asdf                                qweqwe','asdf','/Public/uploads/2018-04-10/awdsdasdasdhfdf.jpg',1,1523366392,1523412884,0,0);
/*!40000 ALTER TABLE `blog_article` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_comment`
--

DROP TABLE IF EXISTS `blog_comment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_comment` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `article_id` int(10) unsigned NOT NULL COMMENT '外键,指文章的id号',
  `user_id` int(11) DEFAULT NULL,
  `content` text NOT NULL COMMENT '回复的内容',
  `created_at` int(10) unsigned NOT NULL COMMENT '回帖的时间戳',
  `deleted_at` int(10) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_comment`
--

LOCK TABLES `blog_comment` WRITE;
/*!40000 ALTER TABLE `blog_comment` DISABLE KEYS */;
INSERT INTO `blog_comment` VALUES (1,4,1,'adsfadf',1523498376,0),(2,4,1,'啊啊士大夫',1523498903,0),(8,4,1,'哭晕',1523531562,0),(9,8,1,'iurdsafdg',1523859552,0);
/*!40000 ALTER TABLE `blog_comment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_reply`
--

DROP TABLE IF EXISTS `blog_reply`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_reply` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
  `comment_id` int(11) NOT NULL COMMENT '回复id',
  `boss_id` int(11) NOT NULL COMMENT '回复人id',
  `content` varchar(255) NOT NULL COMMENT '回复内容',
  `created_at` int(11) NOT NULL COMMENT '回复时间的时间戳',
  `deleted_at` int(1) NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_reply`
--

LOCK TABLES `blog_reply` WRITE;
/*!40000 ALTER TABLE `blog_reply` DISABLE KEYS */;
INSERT INTO `blog_reply` VALUES (1,1,1,'阿斯顿马丁哦',1523501634,0),(6,8,1,'更丰富黑寡妇',1523531589,0),(7,9,1,'srdhgfjhygkh',1523859604,0),(8,1,1,'kjgjgtjufh',1523947287,0);
/*!40000 ALTER TABLE `blog_reply` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_type`
--

DROP TABLE IF EXISTS `blog_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_type` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'blog分类表',
  `name` varchar(255) DEFAULT NULL,
  `path` varchar(255) DEFAULT '0',
  `pid` int(11) DEFAULT NULL COMMENT '父级id',
  `desc` varchar(255) DEFAULT NULL,
  `is_delete` tinyint(4) DEFAULT '0' COMMENT '是否删除， 1表示已删除',
  `link` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_type`
--

LOCK TABLES `blog_type` WRITE;
/*!40000 ALTER TABLE `blog_type` DISABLE KEYS */;
INSERT INTO `blog_type` VALUES (3,'PHP','0',0,'是一种通用开源脚本语言。语法吸收了C语言、Java和Perl的特点，利于学习，使用广泛，主要适用于Web开发领域。PHP 独特的语法混合了C、Java、Perl以及PHP自创的语法。它可以比CGI或者Perl更快速地执行动态网页。',0,'http://www.myblog.com/Home/Article?type=3'),(4,'JS','0',0,'JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML网页上使用，用来给HTML网页增加动态功能。',0,'http://www.myblog.com/Home/Article?type=4'),(5,'LINUX','0',0,'Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的UNIX工具软件、应用程序和网络协议。它支持32位和64位硬件。',0,'http://www.myblog.com/Home/Article?type=5'),(6,'HTML','0',0,'超文本标记语言的结构包括“头”部分（英语：Head）、和“主体”部分（英语：Body），其中“头”部提供关于网页的信息，“主体”部分提供网页的具体内容。<br><br><br>',0,'http://www.myblog.com/Home/Article?type=6'),(7,'thinkphp','0-3',0,'php框架',1,NULL),(8,'thinkmodel','0-3-7',0,'模板',1,NULL);
/*!40000 ALTER TABLE `blog_type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_user`
--

DROP TABLE IF EXISTS `blog_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_user` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `username` varchar(20) NOT NULL COMMENT '用户名',
  `password` char(32) NOT NULL COMMENT '用户密码',
  `avatar` varchar(100) NOT NULL DEFAULT '/Public/home/images/avatar.jpg',
  `created_at` int(10) DEFAULT NULL,
  `updated_at` int(10) DEFAULT NULL,
  `deleted_at` int(10) DEFAULT NULL,
  `is_admin` tinyint(4) DEFAULT '0' COMMENT '是否是后台管理员',
  `email` varchar(255) DEFAULT NULL,
  `salt` varchar(255) DEFAULT NULL,
  `reg_ip` varchar(255) DEFAULT NULL,
  `email_active` tinyint(3) unsigned DEFAULT '0',
  `is_forbidden` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_name` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_user`
--

LOCK TABLES `blog_user` WRITE;
/*!40000 ALTER TABLE `blog_user` DISABLE KEYS */;
INSERT INTO `blog_user` VALUES (1,'admin','58fc7a13a2a72f87b5cc596388ccbcff','/Public/uploads/2018-04-10/5accb9f87433a.jpg',NULL,NULL,NULL,1,NULL,'K1h6B0',NULL,0,1),(2,'manyi','58fc7a13a2a72f87b5cc596388ccbcff','/Public/home/images/avatar.jpg',1504203960,NULL,NULL,1,NULL,'K1h6B0',NULL,0,0),(12,'dumanyi','96ed7603ed6b844cb066f5622e868603','/Public/Uploads/2017-09-28/59cca899e259b.jpg',1506581233,1506587735,NULL,0,'dieche1227@163.com','5XXN3',NULL,1,0);
/*!40000 ALTER TABLE `blog_user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_usertable`
--

DROP TABLE IF EXISTS `blog_usertable`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_usertable` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `nickname` varchar(255) NOT NULL,
  `cover` varchar(255) NOT NULL DEFAULT '/Public/uploads/2018-04-10/5accb9f87433a.jpg',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_usertable`
--

LOCK TABLES `blog_usertable` WRITE;
/*!40000 ALTER TABLE `blog_usertable` DISABLE KEYS */;
INSERT INTO `blog_usertable` VALUES (1,'zuozhen','f5bb0c8de146c67b44babbf4e6584cc0','伏地魔大战老阴比','/Public/avatal/2018-04-17/5ad590fe59df9.jpg'),(2,'1111111','1bbd886460827015e5d605ed44252251','大傻逼','/Public/uploads/2018-04-10/5accb9f87433a.jpg'),(3,'dadada','b857eed5c9405c1f2b98048aae506792','无情大菠萝','/Public/avatal/2018-04-17/5ad551916db8f.jpg'),(4,'qweqweqwe','f5bb0c8de146c67b44babbf4e6584cc0','1111111111','/Public/avatal/2018-04-17/5ad59667c078b.jpg');
/*!40000 ALTER TABLE `blog_usertable` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2018-04-24 16:54:53
